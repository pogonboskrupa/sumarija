<!DOCTYPE html>
<html lang="bs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="public, max-age=31536000, immutable">
    <title>Å umarija - Preglednik</title>

    <!-- Preload -->
    <link rel="preload" href="css/main.css" as="style">
    <link rel="preload" href="css/login-optimized.css" as="style">
    <link rel="preload" href="js/cache-helper.js" as="script">
    <link rel="preload" href="js/api-optimized.js" as="script">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="alternate icon" type="image/png" href="favicon.png">

    <!-- CSS -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/login-optimized.css">
    <link rel="stylesheet" href="css/table-contrast-fix.css">

    <!-- Google Fonts - Comfortaa for tables, Roboto Mono for numeric data -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;500;600;700&family=Roboto+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Preconnect -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net">

    <!-- Performance Modules -->
    <script src="js/cache-helper.js" defer></script>
    <script src="js/api-optimized.js" defer></script>

    <!-- Fixes -->
    <script src="js/week-fix.js" defer></script>
    <script src="js/izvjestaji-new.js" defer></script>

    <!-- Offline-First -->
    <script src="idb-helper.js" defer></script>
    <script src="data-sync.js" defer></script>

    <!-- Main App -->
    <script src="js/app.js" defer></script>

    <script>
        let chartJsLoaded = false;
        window.loadChartJs = function() {
            return new Promise((resolve, reject) => {
                if (chartJsLoaded || window.Chart) {
                    resolve();
                    return;
                }
                const script = document.createElement('script');
                script.src = 'https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js';
                script.onload = () => {
                    chartJsLoaded = true;
                    resolve();
                };
                script.onerror = reject;
                document.head.appendChild(script);
            });
        };

        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js').catch(() => {});
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            const loginScreen = document.getElementById('login-screen');
            if (loginScreen && !loginScreen.classList.contains('hidden')) {
                document.body.classList.add('login-active');
            }
        });
    </script>
</head>
<body class="login-active">
    <!-- Toast Notification Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- LOGIN SCREEN -->
    <div id="login-screen" class="login-container">
        <div class="login-box">
            <div class="logo-container">
                <img src="logo-zuti.png" alt="Å PD Unsko-Sanske Å ume Logo">
                <h3 class="text-outline-firma">Å PD "UNSKO-SANSKE Å UME"</h3>
                <h4 class="company-subtitle">BOSANSKA KRUPA</h4>
            </div>

            <h2>Å umarija</h2>
            <p>Evidencija sjeÄe i otpreme</p>

            <form id="login-form">
                <div id="error-msg" class="error hidden"></div>
                
                <div class="form-group">
                    <label>KorisniÄko ime</label>
                    <input type="text" id="username" placeholder="Email ili username" required autocomplete="username">
                </div>
                
                <div class="form-group">
                    <label>Å ifra</label>
                    <input type="password" id="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required autocomplete="current-password">
                </div>
                
                <button type="submit" class="btn" id="login-btn">Prijavi se</button>
            </form>
        </div>
    </div>

    <div id="app-screen" class="hidden">
        <div class="header">
            <div class="header-content">
                <div class="header-left">
                    <div class="header-title">
                        <p class="text-outline-firma" style="font-size: 20px; margin-bottom: 4px; letter-spacing: 0.5px;">Å PD "UNSKO-SANSKE Å UME" D.O.O. BOS.KRUPA</p>
                        <h1>Pogon gospodarenja Bos. Krupa</h1>
                        <p>Evidencija sjeÄe i otpreme</p>
                    </div>
                </div>
                <div class="header-center">
                    <img src="logo-zuti.png" alt="Å PD Unsko-Sanske Å ume Logo" class="company-logo" id="company-logo">
                </div>
                <div class="header-right">
                    <div class="cache-status" id="cache-status-indicator" title="Status keÅ¡iranja podataka">
                        <span class="cache-status-icon">â±ï¸</span>
                        <span class="cache-status-text">Cache...</span>
                    </div>
                    <div class="header-user">
                        <div class="header-user-name" id="user-name"></div>
                        <div class="header-user-role" id="user-role"></div>
                    </div>
                    <div class="desktop-view-toggle">
                        <button class="desktop-view-button" onclick="toggleDesktopView()" id="desktop-view-btn" title="Prebaci na desktop prikaz">
                            <span>ğŸ–¥ï¸</span>
                            <span>Desktop</span>
                        </button>
                    </div>
                    <div class="user-menu">
                        <button class="user-menu-button" onclick="toggleUserMenu(event)">
                            <span>âš™ï¸</span>
                            <span>Meni</span>
                        </button>
                        <div class="user-menu-dropdown" id="user-menu-dropdown">
                            <div class="user-menu-item" onclick="event.stopPropagation(); closeUserMenu(); toggleDarkMode();">ğŸŒ™ Dark Mode</div>
                            <div class="user-menu-item" onclick="event.stopPropagation(); closeUserMenu(); preloadAllViews();">âš¡ UÄitaj sve prikaze</div>
                            <div class="user-menu-item" id="sync-index-menu-item" onclick="event.stopPropagation(); closeUserMenu(); triggerSyncIndex();" style="display: none;">ğŸ”„ Pokreni indeksiranje</div>
                            <div class="user-menu-item" onclick="event.stopPropagation(); clearAllCache()">ğŸ—‘ï¸ ObriÅ¡i keÅ¡</div>
                            <div class="user-menu-item danger" onclick="event.stopPropagation(); logout()">ğŸšª Odjavi se</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Cache indicator -->
        <div id="cache-indicator" class="cache-indicator hidden"></div>

        <div class="tabs-container">
            <div class="tabs" id="tabs-menu">
                <!-- Tabs will be dynamically populated based on user type -->
            </div>
        </div>

        <div id="loading-screen" class="loading">
            <div class="loading-icon">â³</div>
            <div class="loading-text">UÄitavam podatke...</div>
        </div>
        
        <!-- DASHBOARD CONTENT (Å umarija Krupa) -->
        <div id="dashboard-content" class="container hidden">
            <!-- Summary Cards -->
            <div class="summary-cards" id="summary-cards"></div>

            <!-- Monthly Table -->
            <div class="section">
                <h2>ğŸ“Š MjeseÄni pregled</h2>
                <div class="controls-bar">
                    <input type="text" class="search-input" id="dashboard-search" placeholder="ğŸ” PretraÅ¾i po mjesecu..." onkeyup="filterDashboardTable()">
                    <button class="btn btn-primary" onclick="exportTableToCSV('dashboard')">ğŸ“¥ Export CSV</button>
                </div>
                <div style="overflow-x: auto; -webkit-overflow-scrolling: touch;">
                    <table class="professional-monthly-table" id="dashboard-table">
                        <thead>
                            <tr>
                                <th onclick="sortTable(0, 'dashboard-table')" style="text-align: left;">Mjesec â‡…</th>
                                <th class="right" onclick="sortTable(1, 'dashboard-table')">SjeÄa (mÂ³) â‡…</th>
                                <th class="right" onclick="sortTable(2, 'dashboard-table')">Otprema (mÂ³) â‡…</th>
                                <th class="right" onclick="sortTable(3, 'dashboard-table')">Zaliha â‡…</th>
                                <th class="right" onclick="sortTable(4, 'dashboard-table')">Dinamika â‡…</th>
                                <th class="right" onclick="sortTable(5, 'dashboard-table')">Razlika SjeÄa - Dinamika â‡…</th>
                                <th class="right" onclick="sortTable(6, 'dashboard-table')">Razlika Otprema - Dinamika â‡…</th>
                            </tr>
                        </thead>
                        <tbody id="dashboard-monthly-table"></tbody>
                    </table>
                </div>
            </div>

            <!-- Odjeli Table -->
            <div class="section">
                <h2>ğŸ­ Pregled po odjelima</h2>
                <div class="controls-bar">
                    <input type="text" class="search-input" id="odjeli-search" placeholder="ğŸ” PretraÅ¾i po odjelu..." onkeyup="filterOdjeliTable()">
                    <button class="btn btn-primary" onclick="exportTableToCSV('odjeli')">ğŸ“¥ Export CSV</button>
                </div>
                <div style="overflow-x: auto; -webkit-overflow-scrolling: touch;">
                    <table class="monthly-table" id="odjeli-table">
                    <thead>
                        <tr>
                            <th onclick="sortTable(0, 'odjeli-table')">Odjel â‡…</th>
                            <th class="right" onclick="sortTable(1, 'odjeli-table')">SjeÄa (mÂ³) â‡…</th>
                            <th class="right" onclick="sortTable(2, 'odjeli-table')">Otprema (mÂ³) â‡…</th>
                            <th class="right" onclick="sortTable(3, 'odjeli-table')">Zaliha â‡…</th>
                            <th onclick="sortTable(4, 'odjeli-table')">RadiliÅ¡te â‡…</th>
                            <th onclick="sortTable(5, 'odjeli-table')">IzvoÄ‘aÄ Radova â‡…</th>
                            <th onclick="sortTable(6, 'odjeli-table')">Datum Zadnje SjeÄe â‡…</th>
                            <th class="right" onclick="sortTable(7, 'odjeli-table')">Realizacija % â‡…</th>
                        </tr>
                    </thead>
                    <tbody id="odjeli-table-body"></tbody>
                </table>
                </div>
            </div>

            <!-- Chart -->
            <div class="section">
                <h2>ğŸ“ˆ Trendovi sjeÄe i otpreme</h2>
                <div class="chart-container">
                    <canvas id="trendsChart"></canvas>
                </div>
            </div>
        </div>

        <!-- MJESEÄŒNI SORTIMENTI CONTENT -->
        <div id="mjesecni-sortimenti-content" class="container hidden">
            <!-- SJEÄŒA PO MJESECIMA - Pro Card -->
            <div class="mjesecni-card" style="background: white; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); margin-bottom: 32px; overflow: hidden;">
                <!-- Card Header -->
                <div style="background: linear-gradient(135deg, #1e3a5f 0%, #2d5a87 100%); padding: 20px 24px; display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <h2 style="margin: 0; color: white; font-size: 20px; font-weight: 700; display: flex; align-items: center; gap: 10px;">
                            <span style="font-size: 24px;">ğŸ“Š</span> SjeÄa po mjesecima i sortimentima
                        </h2>
                        <p style="margin: 6px 0 0 0; color: rgba(255,255,255,0.8); font-size: 14px;">Prikaz mjeseÄnih podataka za tekuÄ‡u godinu</p>
                    </div>
                    <button class="btn" onclick="exportTableToCSV('mjesecna-sjeca')" style="background: #10b981; color: white; border: none; padding: 10px 20px; border-radius: 8px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 8px;">
                        <span>ğŸ“¥</span> Export
                    </button>
                </div>
                <!-- Table Container -->
                <div style="overflow-x: auto; -webkit-overflow-scrolling: touch;">
                    <table class="pro-mjesecna-table" id="mjesecna-sjeca-table" style="width: 100%; border-collapse: collapse; font-size: 13px;">
                        <thead id="mjesecna-sjeca-header"></thead>
                        <tbody id="mjesecna-sjeca-body"></tbody>
                    </table>
                </div>
            </div>

            <!-- OTPREMA PO MJESECIMA - Pro Card -->
            <div class="mjesecni-card" style="background: white; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); margin-bottom: 32px; overflow: hidden;">
                <!-- Card Header -->
                <div style="background: linear-gradient(135deg, #7c2d12 0%, #b45309 100%); padding: 20px 24px; display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <h2 style="margin: 0; color: white; font-size: 20px; font-weight: 700; display: flex; align-items: center; gap: 10px;">
                            <span style="font-size: 24px;">ğŸš›</span> Otprema po mjesecima i sortimentima
                        </h2>
                        <p style="margin: 6px 0 0 0; color: rgba(255,255,255,0.8); font-size: 14px;">Prikaz mjeseÄnih podataka za tekuÄ‡u godinu</p>
                    </div>
                    <button class="btn" onclick="exportTableToCSV('mjesecna-otprema')" style="background: #10b981; color: white; border: none; padding: 10px 20px; border-radius: 8px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 8px;">
                        <span>ğŸ“¥</span> Export
                    </button>
                </div>
                <!-- Table Container -->
                <div style="overflow-x: auto; -webkit-overflow-scrolling: touch;">
                    <table class="pro-mjesecna-table" id="mjesecna-otprema-table" style="width: 100%; border-collapse: collapse; font-size: 13px;">
                        <thead id="mjesecna-otprema-header"></thead>
                        <tbody id="mjesecna-otprema-body"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- PRIMACI CONTENT (Prikaz po primaÄima) -->
        <div id="primaci-content" class="container hidden">
            <h2>ğŸ‘· Prikaz sjeÄe</h2>

            <!-- Submenu -->
            <div class="submenu">
                <button class="submenu-tab active" onclick="switchPrimaciSubmenu('monthly')">ğŸ“Š MjeseÄni prikaz</button>
                <button class="submenu-tab" onclick="switchPrimaciSubmenu('daily')">ğŸ“… Po danima</button>
                <button class="submenu-tab" onclick="switchPrimaciSubmenu('radilista')">ğŸ—ï¸ RadiliÅ¡ta</button>
                <button class="submenu-tab" onclick="switchPrimaciSubmenu('izvodjaci')">ğŸ‘· IzvoÄ‘aÄi</button>
            </div>

            <!-- MjeseÄni prikaz -->
            <div id="primaci-monthly-view" class="submenu-content">
                <div class="section">
                    <div class="controls-bar">
                        <input type="text" class="search-input" id="primaci-search" placeholder="ğŸ” PretraÅ¾i po imenu primaÄa..." onkeyup="filterPrimaciTable()">
                        <button class="btn btn-primary" onclick="exportTableToCSV('primaci')">ğŸ“¥ Export CSV</button>
                    </div>
                    <div style="overflow-x: auto; -webkit-overflow-scrolling: touch;">
                        <table class="monthly-table" id="primaci-table">
                            <thead id="primaci-header"></thead>
                            <tbody id="primaci-body"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Dnevni prikaz - tekuÄ‡i mjesec -->
            <div id="primaci-daily-view" class="submenu-content hidden">
                <div class="section">
                    <div class="month-selector">
                        <label for="primaci-month-select">ğŸ“… Izaberi mjesec:</label>
                        <select id="primaci-month-select" class="month-select" onchange="loadPrimaciDaily(this.value)">
                            <option value="0">Januar</option>
                            <option value="1">Februar</option>
                            <option value="2">Mart</option>
                            <option value="3">April</option>
                            <option value="4">Maj</option>
                            <option value="5">Juni</option>
                            <option value="6">Juli</option>
                            <option value="7">Avgust</option>
                            <option value="8">Septembar</option>
                            <option value="9">Oktobar</option>
                            <option value="10">Novembar</option>
                            <option value="11">Decembar</option>
                        </select>
                    </div>
                    <div class="controls-bar">
                        <input type="text" class="search-input" id="primaci-daily-search" placeholder="ğŸ” PretraÅ¾i..." onkeyup="filterPrimaciDailyTable()">
                        <button class="btn btn-primary" onclick="exportTableToCSV('primaci-daily')">ğŸ“¥ Export CSV</button>
                    </div>
                    <div class="kupci-table-wrapper">
                        <table class="kupci-table" id="primaci-daily-table">
                            <thead id="primaci-daily-header"></thead>
                            <tbody id="primaci-daily-body"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Prikaz po radiliÅ¡tima -->
            <div id="primaci-radilista-view" class="submenu-content hidden">
                <div class="section">
                    <h3 style="color: #ea580c; text-align: center; margin-bottom: 20px;">ğŸ—ï¸ Prikaz sjeÄe po radiliÅ¡tima</h3>
                    <div class="controls-bar">
                        <button class="btn btn-primary" onclick="exportTableToCSV('primaci-radilista')">ğŸ“¥ Export CSV</button>
                    </div>
                    <div style="overflow-x: auto; -webkit-overflow-scrolling: touch;">
                        <table class="monthly-table" id="primaci-radilista-table">
                            <thead id="primaci-radilista-header"></thead>
                            <tbody id="primaci-radilista-body"></tbody>
                        </table>
                    </div>
                    <h4 style="color: #7c2d12; margin-top: 30px; margin-bottom: 15px;">ğŸ“Š GodiÅ¡nja rekapitulacija po sortimentima</h4>
                    <div style="overflow-x: auto; -webkit-overflow-scrolling: touch;">
                        <table class="monthly-table" id="primaci-radilista-recap">
                            <thead id="primaci-radilista-recap-header"></thead>
                            <tbody id="primaci-radilista-recap-body"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Prikaz po izvoÄ‘aÄima -->
            <div id="primaci-izvodjaci-view" class="submenu-content hidden">
                <div class="section">
                    <h3 style="color: #ea580c; text-align: center; margin-bottom: 20px;">ğŸ‘· Prikaz sjeÄe po izvoÄ‘aÄima radova</h3>
                    <div class="controls-bar">
                        <button class="btn btn-primary" onclick="exportTableToCSV('primaci-izvodjaci')">ğŸ“¥ Export CSV</button>
                    </div>
                    <div style="overflow-x: auto; -webkit-overflow-scrolling: touch;">
                        <table class="monthly-table" id="primaci-izvodjaci-table">
                            <thead id="primaci-izvodjaci-header"></thead>
                            <tbody id="primaci-izvodjaci-body"></tbody>
                        </table>
                    </div>
                    <h4 style="color: #7c2d12; margin-top: 30px; margin-bottom: 15px;">ğŸ“Š GodiÅ¡nja rekapitulacija po sortimentima</h4>
                    <div style="overflow-x: auto; -webkit-overflow-scrolling: touch;">
                        <table class="monthly-table" id="primaci-izvodjaci-recap">
                            <thead id="primaci-izvodjaci-recap-header"></thead>
                            <tbody id="primaci-izvodjaci-recap-body"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- OTPREMACI CONTENT (Prikaz po otpremaÄima) -->
        <div id="otpremaci-content" class="container hidden">
            <h2>ğŸš› Prikaz otpreme</h2>

            <!-- Submenu -->
            <div class="submenu">
                <button class="submenu-tab active" onclick="switchOtremaciSubmenu('monthly')">ğŸ“Š MjeseÄni prikaz</button>
                <button class="submenu-tab" onclick="switchOtremaciSubmenu('daily')">ğŸ“… Po danima</button>
                <button class="submenu-tab" onclick="switchOtremaciSubmenu('radilista')">ğŸ—ï¸ RadiliÅ¡ta</button>
                <button class="submenu-tab" onclick="switchOtremaciSubmenu('po-kupcima')" id="otpremaci-po-kupcima-tab">ğŸ¢ Otprema u <span id="current-month-name">tekuÄ‡em mjesecu</span></button>
            </div>

            <!-- MjeseÄni prikaz -->
            <div id="otpremaci-monthly-view" class="submenu-content">
                <div class="section">
                    <div class="controls-bar">
                        <input type="text" class="search-input" id="otpremaci-search" placeholder="ğŸ” PretraÅ¾i po imenu otpremaÄa..." onkeyup="filterOtremaciTable()">
                        <button class="btn btn-primary" onclick="exportTableToCSV('otpremaci')">ğŸ“¥ Export CSV</button>
                    </div>
                    <div style="overflow-x: auto; -webkit-overflow-scrolling: touch;">
                        <table class="monthly-table" id="otpremaci-table">
                            <thead id="otpremaci-header"></thead>
                            <tbody id="otpremaci-body"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Dnevni prikaz - tekuÄ‡i mjesec -->
            <div id="otpremaci-daily-view" class="submenu-content hidden">
                <div class="section">
                    <div class="month-selector">
                        <label for="otpremaci-month-select">ğŸ“… Izaberi mjesec:</label>
                        <select id="otpremaci-month-select" class="month-select" onchange="loadOtremaciDaily(this.value)">
                            <option value="0">Januar</option>
                            <option value="1">Februar</option>
                            <option value="2">Mart</option>
                            <option value="3">April</option>
                            <option value="4">Maj</option>
                            <option value="5">Juni</option>
                            <option value="6">Juli</option>
                            <option value="7">Avgust</option>
                            <option value="8">Septembar</option>
                            <option value="9">Oktobar</option>
                            <option value="10">Novembar</option>
                            <option value="11">Decembar</option>
                        </select>
                    </div>
                    <div class="controls-bar">
                        <input type="text" class="search-input" id="otpremaci-daily-search" placeholder="ğŸ” PretraÅ¾i..." onkeyup="filterOtremaciDailyTable()">
                        <button class="btn btn-primary" onclick="exportTableToCSV('otpremaci-daily')">ğŸ“¥ Export CSV</button>
                    </div>
                    <div class="kupci-table-wrapper">
                        <table class="kupci-table" id="otpremaci-daily-table">
                            <thead id="otpremaci-daily-header"></thead>
                            <tbody id="otpremaci-daily-body"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Prikaz po radiliÅ¡tima -->
            <div id="otpremaci-radilista-view" class="submenu-content hidden">
                <div class="section">
                    <h3 style="color: #0891b2; text-align: center; margin-bottom: 20px;">ğŸ—ï¸ Prikaz otpreme po radiliÅ¡tima</h3>
                    <div class="controls-bar">
                        <button class="btn btn-primary" onclick="exportTableToCSV('otpremaci-radilista')">ğŸ“¥ Export CSV</button>
                    </div>
                    <div style="overflow-x: auto; -webkit-overflow-scrolling: touch;">
                        <table class="monthly-table" id="otpremaci-radilista-table">
                            <thead id="otpremaci-radilista-header"></thead>
                            <tbody id="otpremaci-radilista-body"></tbody>
                        </table>
                    </div>
                    <h4 style="color: #155e75; margin-top: 30px; margin-bottom: 15px;">ğŸ“Š GodiÅ¡nja rekapitulacija po sortimentima</h4>
                    <div style="overflow-x: auto; -webkit-overflow-scrolling: touch;">
                        <table class="monthly-table" id="otpremaci-radilista-recap">
                            <thead id="otpremaci-radilista-recap-header"></thead>
                            <tbody id="otpremaci-radilista-recap-body"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Prikaz otpreme po kupcima u tekuÄ‡em mjesecu -->
            <div id="otpremaci-po-kupcima-view" class="submenu-content hidden">
                <div class="section">
                    <h3 style="color: #0891b2; text-align: center; margin-bottom: 20px; font-size: 24px;">
                        ğŸ¢ Otprema po kupcima - <span id="otpremaci-po-kupcima-month-title"></span>
                    </h3>
                    <div class="controls-bar">
                        <input type="text" class="search-input" id="otpremaci-po-kupcima-search" placeholder="ğŸ” PretraÅ¾i po kupcu..." onkeyup="filterOtremaciPoKupcimaTable()">
                        <button class="btn btn-primary" onclick="exportTableToCSV('otpremaci-po-kupcima')">ğŸ“¥ Export CSV</button>
                    </div>
                    <div style="overflow-x: auto; -webkit-overflow-scrolling: touch;">
                        <table class="expert-table" id="otpremaci-po-kupcima-table">
                            <thead id="otpremaci-po-kupcima-header"></thead>
                            <tbody id="otpremaci-po-kupcima-body"></tbody>
                            <tfoot id="otpremaci-po-kupcima-footer"></tfoot>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- KUPCI CONTENT (Prikaz po kupcima) -->
        <div id="kupci-content" class="container hidden">
            <!-- Submenu za Kupci -->
            <div class="submenu">
                <button class="submenu-tab active" onclick="switchKupciSubmenu('godisnji')">ğŸ¢ GodiÅ¡nji pregled</button>
                <button class="submenu-tab" onclick="switchKupciSubmenu('mjesecni')">ğŸ“… MjeseÄni pregled</button>
            </div>

            <!-- GodiÅ¡nji pregled -->
            <div id="kupci-godisnji-view" class="submenu-content">
                <div class="section">
                    <h2>ğŸ¢ GodiÅ¡nji pregled po kupcima</h2>
                    <div class="controls-bar">
                        <input type="text" class="search-input" id="kupci-godisnji-search" placeholder="ğŸ” PretraÅ¾i po kupcu..." onkeyup="filterKupciGodisnjiTable()">
                        <button class="btn btn-primary" onclick="exportTableToCSV('kupci-godisnji')">ğŸ“¥ Export CSV</button>
                    </div>
                    <div class="kupci-table-wrapper">
                        <table class="kupci-table" id="kupci-godisnji-table">
                            <thead id="kupci-godisnji-header"></thead>
                            <tbody id="kupci-godisnji-body"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- MjeseÄni pregled -->
            <div id="kupci-mjesecni-view" class="submenu-content hidden">
                <div class="section">
                    <h2>ğŸ“… MjeseÄni pregled po kupcima</h2>
                    <div class="controls-bar">
                        <input type="text" class="search-input" id="kupci-mjesecni-search" placeholder="ğŸ” PretraÅ¾i po kupcu..." onkeyup="filterKupciMjesecniTable()">
                        <button class="btn btn-primary" onclick="exportTableToCSV('kupci-mjesecni')">ğŸ“¥ Export CSV</button>
                    </div>
                    <div class="kupci-table-wrapper">
                        <table class="kupci-table" id="kupci-mjesecni-table">
                            <thead id="kupci-mjesecni-header"></thead>
                            <tbody id="kupci-mjesecni-body"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- PRIMAC PERSONAL VIEW -->
        <div id="primac-personal-content" class="container hidden">
            <div class="section">
                <!-- Professional Header -->
                <div class="worker-header primac">
                    <div class="worker-header-icon">ğŸ‘·</div>
                    <div style="flex: 1;">
                        <h1 class="worker-header-title">Pregled sjeÄe</h1>
                        <p class="worker-header-subtitle">Pregled primki</p>
                    </div>
                    <div>
                        <select id="primac-personal-year-select" class="year-select" onchange="loadPrimacPersonal()" style="padding: 10px 16px; font-size: 16px; border-radius: 8px; border: 2px solid #047857; min-width: 120px;">
                            <option value="2025">2025</option>
                            <option value="2026" selected>2026</option>
                            <option value="2025">2025</option>
                        </select>
                    </div>
                </div>

                <!-- Dnevni dijagram sjeÄe -->
                <div class="worker-chart-card primac">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; flex-wrap: wrap; gap: 12px;">
                        <div>
                            <h3 class="worker-chart-title" style="margin: 0;">ğŸ“Š Dnevni izvjeÅ¡taj sjeÄa</h3>
                            <p style="margin: 5px 0 0 0; color: #6b7280; font-size: 14px;">Prikaz dnevne sjeÄe po mjesecima</p>
                        </div>
                        <select id="primac-daily-month-select" class="year-select" onchange="loadPrimacPersonal()" style="padding: 10px 16px; font-size: 16px; border-radius: 8px; border: 2px solid #047857; min-width: 150px;">
                            <option value="1">Januar</option>
                            <option value="2">Februar</option>
                            <option value="3">Mart</option>
                            <option value="4">April</option>
                            <option value="5">Maj</option>
                            <option value="6">Juni</option>
                            <option value="7">Juli</option>
                            <option value="8">August</option>
                            <option value="9">Septembar</option>
                            <option value="10">Oktobar</option>
                            <option value="11">Novembar</option>
                            <option value="12">Decembar</option>
                        </select>
                    </div>
                    <canvas id="primac-daily-chart" class="worker-chart-canvas"></canvas>
                </div>

                <!-- Controls -->
                <div class="controls-bar">
                    <input type="text" class="search-input" id="primac-personal-search" placeholder="ğŸ” PretraÅ¾i po odjelu..." onkeyup="filterPrimacPersonalTable()">
                    <button class="btn btn-primary" onclick="exportTableToCSV('primac-personal')">ğŸ“¥ Export CSV</button>
                </div>

                <!-- Modern Table Card -->
                <div class="worker-table-card">
                    <div class="worker-table-card-header">
                        <h3 class="worker-table-card-title">
                            ğŸ“‹ SjeÄa po odjelima
                        </h3>
                        <span class="worker-table-card-badge" id="primac-row-count">0 redova</span>
                    </div>
                    <div style="overflow-x: auto;">
                        <table class="worker-table" id="primac-personal-table">
                            <thead id="primac-personal-header"></thead>
                            <tbody id="primac-personal-body"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- PRIMAC GODISNJI VIEW -->
        <div id="primac-godisnji-content" class="container hidden">
            <div class="section">
                <!-- Professional Header -->
                <div class="worker-header primac">
                    <div class="worker-header-icon">ğŸ“…</div>
                    <div style="flex: 1;">
                        <h1 class="worker-header-title">GodiÅ¡nji prikaz</h1>
                        <p class="worker-header-subtitle">MjeseÄna rekapitulacija sjeÄe</p>
                    </div>
                    <div>
                        <select id="primac-godisnji-year-select" class="year-select" onchange="loadPrimacGodisnji()" style="padding: 10px 16px; font-size: 16px; border-radius: 8px; border: 2px solid #047857; min-width: 120px;">
                            <option value="2026" selected>2026</option>
                            <option value="2025">2025</option>
                        </select>
                    </div>
                </div>

                <!-- MjeseÄni dijagram sjeÄe -->
                <div class="worker-chart-card primac">
                    <h3 class="worker-chart-title">ğŸ“Š MjeseÄna sjeÄa - GrafiÄki prikaz</h3>
                    <p style="margin: 0 0 15px 0; color: #6b7280; font-size: 14px;">MjeseÄne rekapitulacije za cijelu godinu</p>
                    <canvas id="primac-yearly-chart" class="worker-chart-canvas"></canvas>
                </div>

                <!-- GodiÅ¡nja tabela -->
                <div class="worker-table-card">
                    <div class="worker-table-card-header">
                        <h3 class="worker-table-card-title">
                            ğŸ“… GodiÅ¡nja rekapitulacija po mjesecima
                        </h3>
                        <span class="worker-table-card-badge" id="primac-godisnji-year-badge">2026</span>
                    </div>
                    <div style="overflow-x: auto;">
                        <table class="worker-table" id="primac-godisnji-main-table">
                            <thead id="primac-godisnji-main-header"></thead>
                            <tbody id="primac-godisnji-main-body"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- OTPREMAC PERSONAL VIEW -->
        <div id="otpremac-personal-content" class="container hidden">
            <div class="section">
                <!-- Professional Header -->
                <div class="worker-header otpremac">
                    <div class="worker-header-icon">ğŸš›</div>
                    <div style="flex: 1;">
                        <h1 class="worker-header-title">Pregled otpreme</h1>
                        <p class="worker-header-subtitle">Pregled otpremnica</p>
                    </div>
                    <div>
                        <select id="otpremac-personal-year-select" class="year-select" onchange="loadOtpremacPersonal()" style="padding: 10px 16px; font-size: 16px; border-radius: 8px; border: 2px solid #2563eb; min-width: 120px;">
                            <option value="2025">2025</option>
                            <option value="2026" selected>2026</option>
                            <option value="2025">2025</option>
                        </select>
                    </div>
                </div>

                <!-- Dnevni dijagram otpreme -->
                <div class="worker-chart-card otpremac">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; flex-wrap: wrap; gap: 12px;">
                        <div>
                            <h3 class="worker-chart-title" style="margin: 0;">ğŸ“Š Dnevni izvjeÅ¡taj otpreme</h3>
                            <p style="margin: 5px 0 0 0; color: #6b7280; font-size: 14px;">Prikaz dnevne otpreme po mjesecima</p>
                        </div>
                        <select id="otpremac-daily-month-select" class="year-select" onchange="loadOtpremacPersonal()" style="padding: 10px 16px; font-size: 16px; border-radius: 8px; border: 2px solid #1e40af; min-width: 150px;">
                            <option value="1">Januar</option>
                            <option value="2">Februar</option>
                            <option value="3">Mart</option>
                            <option value="4">April</option>
                            <option value="5">Maj</option>
                            <option value="6">Juni</option>
                            <option value="7">Juli</option>
                            <option value="8">August</option>
                            <option value="9">Septembar</option>
                            <option value="10">Oktobar</option>
                            <option value="11">Novembar</option>
                            <option value="12">Decembar</option>
                        </select>
                    </div>
                    <canvas id="otpremac-daily-chart" class="worker-chart-canvas"></canvas>
                </div>

                <!-- MjeseÄni dijagram otpreme -->
                <div class="worker-chart-card otpremac">
                    <h3 class="worker-chart-title">ğŸ“Š MjeseÄna otprema - GrafiÄki prikaz</h3>
                    <p style="margin: 0 0 15px 0; color: #6b7280; font-size: 14px;">GodiÅ¡nji pregled otpreme po mjesecima</p>
                    <canvas id="otpremac-chart" class="worker-chart-canvas"></canvas>
                </div>

                <!-- Controls -->
                <div class="controls-bar">
                    <input type="text" class="search-input" id="otpremac-personal-search" placeholder="ğŸ” PretraÅ¾i po odjelu/kupcu..." onkeyup="filterOtpremacPersonalTable()">
                    <button class="btn btn-primary" onclick="exportTableToCSV('otpremac-personal')">ğŸ“¥ Export CSV</button>
                </div>

                <!-- Modern Table Card -->
                <div class="worker-table-card">
                    <div class="worker-table-card-header">
                        <h3 class="worker-table-card-title">
                            ğŸ“¦ Otprema po odjelima i kupcima
                        </h3>
                        <span class="worker-table-card-badge blue" id="otpremac-row-count">0 redova</span>
                    </div>
                    <div style="overflow-x: auto;">
                        <table class="worker-table otpremac" id="otpremac-personal-table">
                            <thead id="otpremac-personal-header"></thead>
                            <tbody id="otpremac-personal-body"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- PRIMAC ODJELI VIEW (By Department) -->
        <div id="primac-odjeli-content" class="container hidden">
            <div class="section">
                <h2>ğŸ­ Prikaz sjeÄe po odjelima</h2>
                <div id="primac-odjeli-container"></div>
                <div class="controls-bar" style="justify-content: center; margin-top: 20px;">
                    <button class="btn btn-secondary" onclick="prevPagePrimacOdjeli()" id="primac-odjeli-prev">â† Prethodna</button>
                    <span style="margin: 0 20px; font-weight: 600;" id="primac-odjeli-page-info">Stranica 1</span>
                    <button class="btn btn-secondary" onclick="nextPagePrimacOdjeli()" id="primac-odjeli-next">SledeÄ‡a â†’</button>
                </div>
            </div>
        </div>

        <!-- OTPREMAC ODJELI VIEW (By Department) -->
        <div id="otpremac-odjeli-content" class="container hidden">
            <div class="section">
                <h2>ğŸ­ Prikaz otpreme po odjelima</h2>
                <div id="otpremac-odjeli-container"></div>
                <div class="controls-bar" style="justify-content: center; margin-top: 20px;">
                    <button class="btn btn-secondary" onclick="prevPageOtpremacOdjeli()" id="otpremac-odjeli-prev">â† Prethodna</button>
                    <span style="margin: 0 20px; font-weight: 600;" id="otpremac-odjeli-page-info">Stranica 1</span>
                    <button class="btn btn-secondary" onclick="nextPageOtpremacOdjeli()" id="otpremac-odjeli-next">SledeÄ‡a â†’</button>
                </div>
            </div>
        </div>

        <!-- ADD SJECA FORM (For PrimaÄi) -->
        <div id="add-sjeca-content" class="container hidden">
            <div class="section">
                <form id="add-sjeca-form" class="worker-form" onsubmit="submitSjeca(event)">
                    <!-- Professional Header -->
                    <div class="worker-form-header">
                        <h2 class="worker-form-title">
                            <span>â•</span>
                            Dodaj novu sjeÄu
                        </h2>
                        <p class="worker-form-subtitle">Unesite podatke o sjeÄi - sva polja oznaÄena automatskim raÄunanjem se automatski popunjavaju</p>
                    </div>

                    <!-- Basic Info -->
                    <div class="worker-form-grid">
                        <div class="worker-form-group">
                            <label class="worker-form-label">ğŸ“… Datum</label>
                            <input type="date" id="sjeca-datum" required class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">ğŸ­ Odjel</label>
                            <select id="sjeca-odjel" required class="worker-form-select">
                                <option value="">Izaberi odjel...</option>
                            </select>
                        </div>
                    </div>

                    <!-- Sortimenti Section -->
                    <h3 class="worker-form-section-title">
                        <span>ğŸŒ²</span>
                        Sortimenti ÄŒetinara (mÂ³)
                    </h3>
                    <div class="worker-form-grid">
                        <div class="worker-form-group">
                            <label class="worker-form-label">F/L ÄŒ</label>
                            <input type="number" step="0.01" id="sjeca-FL-C" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">I ÄŒ</label>
                            <input type="number" step="0.01" id="sjeca-I-C" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">II ÄŒ</label>
                            <input type="number" step="0.01" id="sjeca-II-C" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">III ÄŒ</label>
                            <input type="number" step="0.01" id="sjeca-III-C" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">RD</label>
                            <input type="number" step="0.01" id="sjeca-RD" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">TRUPCI ÄŒ <span style="font-size: 10px; color: #6b7280;">(AUTO)</span></label>
                            <input type="number" step="0.01" id="sjeca-TRUPCI-C" value="0" min="0" readonly class="worker-form-input" style="background: #f3f4f6; font-weight: 600;">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">CEL.DUGA</label>
                            <input type="number" step="0.01" id="sjeca-CEL-DUGA" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">CEL.CIJEPANA</label>
                            <input type="number" step="0.01" id="sjeca-CEL-CIJEPANA" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">Å KART</label>
                            <input type="number" step="0.01" id="sjeca-SKART" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">Î£ ÄŒETINARI <span style="font-size: 10px; color: #6b7280;">(AUTO)</span></label>
                            <input type="number" step="0.01" id="sjeca-CETINARI" value="0" min="0" readonly class="worker-form-input" style="background: #dbeafe; font-weight: 700; color: #1e40af;">
                        </div>
                    </div>

                    <h3 class="worker-form-section-title">
                        <span>ğŸ‚</span>
                        Sortimenti LiÅ¡Ä‡ara (mÂ³)
                    </h3>
                    <div class="worker-form-grid">
                        <div class="worker-form-group">
                            <label class="worker-form-label">F/L L</label>
                            <input type="number" step="0.01" id="sjeca-FL-L" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">I L</label>
                            <input type="number" step="0.01" id="sjeca-I-L" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">II L</label>
                            <input type="number" step="0.01" id="sjeca-II-L" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">III L</label>
                            <input type="number" step="0.01" id="sjeca-III-L" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">TRUPCI L <span style="font-size: 10px; color: #6b7280;">(AUTO)</span></label>
                            <input type="number" step="0.01" id="sjeca-TRUPCI-L" value="0" min="0" readonly class="worker-form-input" style="background: #f3f4f6; font-weight: 600;">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">OGR.DUGI</label>
                            <input type="number" step="0.01" id="sjeca-OGR-DUGI" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">OGR.CIJEPANI</label>
                            <input type="number" step="0.01" id="sjeca-OGR-CIJEPANI" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">GULE</label>
                            <input type="number" step="0.01" id="sjeca-GULE" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">LIÅ Ä†ARI <span style="font-size: 10px; color: #6b7280;">(AUTO)</span></label>
                            <input type="number" step="0.01" id="sjeca-LISCARI" value="0" min="0" readonly class="worker-form-input" style="background: #fef3c7; font-weight: 700; color: #92400e;">
                        </div>
                    </div>

                    <!-- Total Box -->
                    <div class="worker-form-total-box">
                        <div class="worker-form-total-label">ğŸ“Š UKUPNO ÄŒ+L</div>
                        <input type="number" step="0.01" id="sjeca-UKUPNO ÄŒ+L" value="0" readonly class="worker-form-total-value" style="border: none; background: transparent;">
                    </div>

                    <!-- Actions -->
                    <div class="worker-form-actions">
                        <button type="button" class="worker-form-btn worker-form-btn-secondary" onclick="resetSjecaForm()">PoniÅ¡ti</button>
                        <button type="submit" class="worker-form-btn worker-form-btn-primary" id="submit-sjeca-btn">Dodaj sjeÄu</button>
                    </div>

                    <div id="sjeca-message" class="hidden" style="margin-top: 20px; padding: 12px; border-radius: 8px;"></div>
                </form>
            </div>
        </div>

        <!-- ADD OTPREMA FORM (For OtpremaÄi) -->
        <div id="add-otprema-content" class="container hidden">
            <div class="section">
                <form id="add-otprema-form" class="worker-form otpremac" onsubmit="submitOtprema(event)">
                    <!-- Professional Header -->
                    <div class="worker-form-header">
                        <h2 class="worker-form-title">
                            <span>â•</span>
                            Dodaj novu otpremu
                        </h2>
                        <p class="worker-form-subtitle">Unesite podatke o otpremi - ukljuÄite kupca i broj otpremnice</p>
                    </div>

                    <!-- Basic Info -->
                    <div class="worker-form-grid">
                        <div class="worker-form-group">
                            <label class="worker-form-label">ğŸ“… Datum</label>
                            <input type="date" id="otprema-datum" required class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">ğŸ­ Odjel</label>
                            <select id="otprema-odjel" required class="worker-form-select">
                                <option value="">Izaberi odjel...</option>
                            </select>
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">ğŸ¢ Kupac</label>
                            <input type="text" id="otprema-kupac" placeholder="Naziv kupca" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">ğŸ“‹ Broj otpremnice</label>
                            <input type="text" id="otprema-broj-otpremnice" placeholder="Unesite broj" class="worker-form-input">
                        </div>
                    </div>

                    <!-- Sortimenti Section -->
                    <h3 class="worker-form-section-title">
                        <span>ğŸŒ²</span>
                        Sortimenti ÄŒetinara (mÂ³)
                    </h3>
                    <div class="worker-form-grid">
                        <div class="worker-form-group">
                            <label class="worker-form-label">F/L ÄŒ</label>
                            <input type="number" step="0.01" id="otprema-FL-C" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">I ÄŒ</label>
                            <input type="number" step="0.01" id="otprema-I-C" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">II ÄŒ</label>
                            <input type="number" step="0.01" id="otprema-II-C" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">III ÄŒ</label>
                            <input type="number" step="0.01" id="otprema-III-C" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">RD</label>
                            <input type="number" step="0.01" id="otprema-RD" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">TRUPCI ÄŒ <span style="font-size: 10px; color: #6b7280;">(AUTO)</span></label>
                            <input type="number" step="0.01" id="otprema-TRUPCI-C" value="0" min="0" readonly class="worker-form-input" style="background: #f3f4f6; font-weight: 600;">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">CEL.DUGA</label>
                            <input type="number" step="0.01" id="otprema-CEL-DUGA" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">CEL.CIJEPANA</label>
                            <input type="number" step="0.01" id="otprema-CEL-CIJEPANA" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">Å KART</label>
                            <input type="number" step="0.01" id="otprema-SKART" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">Î£ ÄŒETINARI <span style="font-size: 10px; color: #6b7280;">(AUTO)</span></label>
                            <input type="number" step="0.01" id="otprema-CETINARI" value="0" min="0" readonly class="worker-form-input" style="background: #dbeafe; font-weight: 700; color: #1e40af;">
                        </div>
                    </div>

                    <h3 class="worker-form-section-title">
                        <span>ğŸ‚</span>
                        Sortimenti LiÅ¡Ä‡ara (mÂ³)
                    </h3>
                    <div class="worker-form-grid">
                        <div class="worker-form-group">
                            <label class="worker-form-label">F/L L</label>
                            <input type="number" step="0.01" id="otprema-FL-L" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">I L</label>
                            <input type="number" step="0.01" id="otprema-I-L" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">II L</label>
                            <input type="number" step="0.01" id="otprema-II-L" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">III L</label>
                            <input type="number" step="0.01" id="otprema-III-L" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">TRUPCI L <span style="font-size: 10px; color: #6b7280;">(AUTO)</span></label>
                            <input type="number" step="0.01" id="otprema-TRUPCI-L" value="0" min="0" readonly class="worker-form-input" style="background: #f3f4f6; font-weight: 600;">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">OGR.DUGI</label>
                            <input type="number" step="0.01" id="otprema-OGR-DUGI" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">OGR.CIJEPANI</label>
                            <input type="number" step="0.01" id="otprema-OGR-CIJEPANI" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">GULE</label>
                            <input type="number" step="0.01" id="otprema-GULE" value="0" min="0" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">LIÅ Ä†ARI <span style="font-size: 10px; color: #6b7280;">(AUTO)</span></label>
                            <input type="number" step="0.01" id="otprema-LISCARI" value="0" min="0" readonly class="worker-form-input" style="background: #fef3c7; font-weight: 700; color: #92400e;">
                        </div>
                    </div>

                    <!-- Total Box -->
                    <div class="worker-form-total-box">
                        <div class="worker-form-total-label">ğŸ“Š UKUPNO ÄŒ+L</div>
                        <input type="number" step="0.01" id="otprema-UKUPNO ÄŒ+L" value="0" readonly class="worker-form-total-value" style="border: none; background: transparent;">
                    </div>

                    <!-- Actions -->
                    <div class="worker-form-actions">
                        <button type="button" class="worker-form-btn worker-form-btn-secondary" onclick="resetOtpremaForm()">PoniÅ¡ti</button>
                        <button type="submit" class="worker-form-btn worker-form-btn-primary otpremac" id="submit-otprema-btn">Dodaj otpremu</button>
                    </div>

                    <div id="otprema-message" class="hidden" style="margin-top: 20px; padding: 12px; border-radius: 8px;"></div>
                </form>
            </div>
        </div>

        <!-- MY SJECE VIEW (For PrimaÄ) -->
        <div id="my-sjece-content" class="container hidden">
            <div class="section">
                <!-- Professional Header -->
                <div class="worker-header primac">
                    <div class="worker-header-icon">ğŸ“</div>
                    <div>
                        <h1 class="worker-header-title">Moje sjeÄe</h1>
                        <p class="worker-header-subtitle">Pregledajte i ispravite vaÅ¡e nedavne unose - zadnjih 10 zapisa</p>
                    </div>
                </div>

                <!-- Modern Card Container -->
                <div class="worker-table-card">
                    <div class="worker-table-card-header">
                        <h3 class="worker-table-card-title">ğŸ“‹ Nedavni unosi</h3>
                        <span class="worker-table-card-badge" id="my-sjece-count">0 zapisa</span>
                    </div>
                    <div id="my-sjece-container"></div>
                </div>
            </div>
        </div>

        <!-- MY OTPREME VIEW (For OtpremaÄ) -->
        <div id="my-otpreme-content" class="container hidden">
            <div class="section">
                <!-- Professional Header -->
                <div class="worker-header otpremac">
                    <div class="worker-header-icon">ğŸ“</div>
                    <div>
                        <h1 class="worker-header-title">Moje otpreme</h1>
                        <p class="worker-header-subtitle">Pregledajte i ispravite vaÅ¡e nedavne unose - zadnjih 10 zapisa</p>
                    </div>
                </div>

                <!-- Modern Card Container -->
                <div class="worker-table-card">
                    <div class="worker-table-card-header">
                        <h3 class="worker-table-card-title">ğŸ“¦ Nedavni unosi</h3>
                        <span class="worker-table-card-badge blue" id="my-otpreme-count">0 zapisa</span>
                    </div>
                    <div id="my-otpreme-container"></div>
                </div>
            </div>
        </div>

        <!-- EDIT SJECA FORM (For editing existing entry) -->
        <div id="edit-sjeca-content" class="container hidden">
            <div class="section">
                <form id="edit-sjeca-form" class="worker-form" onsubmit="submitEditSjeca(event)">
                    <input type="hidden" id="edit-sjeca-rowIndex">

                    <!-- Professional Header -->
                    <div class="worker-form-header">
                        <h2 class="worker-form-title">
                            <span>âœï¸</span>
                            Uredi sjeÄu
                        </h2>
                        <p class="worker-form-subtitle">Izmjenite podatke o sjeÄi - automatski totali Ä‡e se preraÄunati</p>
                    </div>

                    <!-- Basic Info -->
                    <div class="worker-form-grid">
                        <div class="worker-form-group">
                            <label class="worker-form-label">ğŸ“… Datum</label>
                            <input type="date" id="edit-sjeca-datum" required class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">ğŸ­ Odjel</label>
                            <select id="edit-sjeca-odjel" required class="worker-form-select">
                                <option value="">Izaberi odjel...</option>
                            </select>
                        </div>
                    </div>

                    <!-- Sortimenti Section -->
                    <h3 class="worker-form-section-title">
                        <span>ğŸŒ²</span>
                        Sortimenti (mÂ³)
                    </h3>
                    <div class="worker-form-grid" id="edit-sjeca-sortimenti">
                        <!-- Sortimenti fields will be dynamically added here -->
                    </div>

                    <!-- Total Box -->
                    <div class="worker-form-total-box">
                        <div class="worker-form-total-label">ğŸ“Š UKUPNO ÄŒ+L</div>
                        <input type="number" step="0.01" id="edit-sjeca-UKUPNO ÄŒ+L" value="0" readonly class="worker-form-total-value" style="border: none; background: transparent;">
                    </div>

                    <!-- Actions -->
                    <div class="worker-form-actions">
                        <button type="button" class="worker-form-btn worker-form-btn-secondary" onclick="cancelEditSjeca()">OtkaÅ¾i</button>
                        <button type="submit" class="worker-form-btn worker-form-btn-primary" id="submit-edit-sjeca-btn">SaÄuvaj izmjene</button>
                    </div>

                    <div id="edit-sjeca-message" class="hidden" style="margin-top: 20px; padding: 12px; border-radius: 8px;"></div>
                </form>
            </div>
        </div>

        <!-- EDIT OTPREMA FORM (For editing existing entry) -->
        <div id="edit-otprema-content" class="container hidden">
            <div class="section">
                <form id="edit-otprema-form" class="worker-form otpremac" onsubmit="submitEditOtprema(event)">
                    <input type="hidden" id="edit-otprema-rowIndex">

                    <!-- Professional Header -->
                    <div class="worker-form-header">
                        <h2 class="worker-form-title">
                            <span>âœï¸</span>
                            Uredi otpremu
                        </h2>
                        <p class="worker-form-subtitle">Izmjenite podatke o otpremi - automatski totali Ä‡e se preraÄunati</p>
                    </div>

                    <!-- Basic Info -->
                    <div class="worker-form-grid">
                        <div class="worker-form-group">
                            <label class="worker-form-label">ğŸ“… Datum</label>
                            <input type="date" id="edit-otprema-datum" required class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">ğŸ­ Odjel</label>
                            <select id="edit-otprema-odjel" required class="worker-form-select">
                                <option value="">Izaberi odjel...</option>
                            </select>
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">ğŸ¢ Kupac</label>
                            <input type="text" id="edit-otprema-kupac" placeholder="Naziv kupca" class="worker-form-input">
                        </div>
                        <div class="worker-form-group">
                            <label class="worker-form-label">ğŸ“‹ Broj otpremnice</label>
                            <input type="text" id="edit-otprema-broj-otpremnice" placeholder="Unesite broj" class="worker-form-input">
                        </div>
                    </div>

                    <!-- Sortimenti Section -->
                    <h3 class="worker-form-section-title">
                        <span>ğŸŒ²</span>
                        Sortimenti (mÂ³)
                    </h3>
                    <div class="worker-form-grid" id="edit-otprema-sortimenti">
                        <!-- Sortimenti fields will be dynamically added here -->
                    </div>

                    <!-- Total Box -->
                    <div class="worker-form-total-box">
                        <div class="worker-form-total-label">ğŸ“Š UKUPNO ÄŒ+L</div>
                        <input type="number" step="0.01" id="edit-otprema-UKUPNO ÄŒ+L" value="0" readonly class="worker-form-total-value" style="border: none; background: transparent;">
                    </div>

                    <!-- Actions -->
                    <div class="worker-form-actions">
                        <button type="button" class="worker-form-btn worker-form-btn-secondary" onclick="cancelEditOtprema()">OtkaÅ¾i</button>
                        <button type="submit" class="worker-form-btn worker-form-btn-primary otpremac" id="submit-edit-otprema-btn">SaÄuvaj izmjene</button>
                    </div>

                    <div id="edit-otprema-message" class="hidden" style="margin-top: 20px; padding: 12px; border-radius: 8px;"></div>
                </form>
            </div>
        </div>

        <!-- OPERATIVA CONTENT - Analytics Dashboard -->
        <div id="operativa-content" class="container hidden">
            <div class="page-header">
                <div class="page-header-left">
                    <h1>ğŸ“Š Operativa & Analiza</h1>
                    <p>Napredna analitika i KPI metrike za donoÅ¡enje odluka</p>
                </div>
                <div class="page-header-right">
                    <span class="badge success">GodiÅ¡nji pregled</span>
                </div>
            </div>

            <!-- KPI Metrics Cards -->
            <div class="kpi-grid">
                <div class="kpi-card-small">
                    <div class="kpi-label-small">SjeÄa/Otprema Ratio</div>
                    <div class="kpi-value-small" id="kpi-ratio">0.00</div>
                </div>
                <div class="kpi-card-small blue">
                    <div class="kpi-label-small">Procenat Ostvarenja</div>
                    <div class="kpi-value-small" id="kpi-procenat">0%</div>
                </div>
                <div class="kpi-card-small yellow">
                    <div class="kpi-label-small">Ukupno Odjela</div>
                    <div class="kpi-value-small" id="kpi-odjela">0</div>
                </div>
                <div class="kpi-card-small purple">
                    <div class="kpi-label-small">ProsjeÄna SjeÄa</div>
                    <div class="kpi-value-small" id="kpi-avg-sjeca">0 mÂ³</div>
                </div>
            </div>

            <!-- Analytics Grid - Top 5 & Projekat Progress -->
            <div class="analytics-grid">
                <!-- Top 5 Odjela by SjeÄa -->
                <div class="section">
                    <h2>ğŸ† Top 5 Odjela - SjeÄa</h2>
                    <p>Najboljih pet odjela po ukupnoj sjeÄi</p>
                    <div id="top-odjeli-list">
                        <div class="ranking-item">
                            <div class="ranking-number">1</div>
                            <div class="ranking-info">
                                <div class="ranking-name">UÄitavanje...</div>
                                <div class="ranking-value">0.00 mÂ³</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Projekat vs Ostvareno Progress Bars -->
                <div class="section">
                    <h2>ğŸ¯ Projekat vs Ostvareno</h2>
                    <p>Procenat realizacije plana po odjelima</p>
                    <div id="projekat-ostvareno-list">
                        <div style="margin-bottom: 16px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                                <span style="font-weight: 600; color: #1f2937;">UÄitavanje...</span>
                                <span style="font-weight: 700; color: #059669;">0.0%</span>
                            </div>
                            <div class="progress-bar-container" style="height: 12px;">
                                <div class="progress-bar-fill" style="width: 0%; background: #e5e7eb;"></div>
                            </div>
                            <div style="font-size: 11px; color: #6b7280; margin-top: 4px;">0 / 0 mÂ³</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Monthly Trend Analysis -->
            <div class="section">
                <h2>ğŸ“ˆ Monthly Trend - Analiza</h2>
                <p>MjeseÄna analiza trendova sjeÄe i otpreme</p>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 20px; margin-top: 20px;">
                    <div>
                        <div style="font-size: 13px; color: #6b7280; font-weight: 600; margin-bottom: 4px;">AVG SJEÄŒA PO MJESECU</div>
                        <div style="font-size: 28px; font-weight: 700; color: #059669;" id="avg-monthly-sjeca">0 mÂ³</div>
                    </div>
                    <div>
                        <div style="font-size: 13px; color: #6b7280; font-weight: 600; margin-bottom: 4px;">AVG OTPREMA PO MJESECU</div>
                        <div style="font-size: 28px; font-weight: 700; color: #2563eb;" id="avg-monthly-otprema">0 mÂ³</div>
                    </div>
                </div>

                <!-- Chart Legend -->
                <div class="line-legend">
                    <div class="line-legend-item">
                        <div class="line-legend-color green"></div>
                        <span>SjeÄa</span>
                    </div>
                    <div class="line-legend-item">
                        <div class="line-legend-color blue"></div>
                        <span>Otprema</span>
                    </div>
                </div>

                <svg id="analytics-chart" class="chart-svg"></svg>
            </div>

            <!-- Performance Alerts Banner -->
            <div id="performance-alerts-banner" style="display: none;"></div>

            <!-- IzvoÄ‘aÄi Performance -->
            <div class="section">
                <h2>ğŸ‘· Top IzvoÄ‘aÄi Radova</h2>
                <p>Ranking izvoÄ‘aÄa po ukupnom volume-u sjeÄe</p>
                <div id="izvodjaci-performance-list">
                    <p style="color: #6b7280; text-align: center; padding: 20px;">UÄitavanje...</p>
                </div>
            </div>

            <!-- Timeline Analysis -->
            <div class="analytics-grid">
                <div class="section">
                    <h2>ğŸ“… Timeline - Zadnji Unosi</h2>
                    <p>Odjeli sortirani po datumu zadnjeg unosa</p>
                    <div id="timeline-unosi-list">
                        <p style="color: #6b7280; text-align: center; padding: 20px;">UÄitavanje...</p>
                    </div>
                </div>
            </div>

            <!-- Seasonal Analysis (Q1-Q4) -->
            <div class="section">
                <h2>ğŸ“… Sezonska Analiza - Quartali</h2>
                <p>Produktivnost po quarter-ima (Q1: Jan-Mar, Q2: Apr-Jun, Q3: Jul-Sep, Q4: Oct-Dec)</p>
                <div class="kpi-grid" id="seasonal-analysis">
                    <p style="color: #6b7280; text-align: center; padding: 20px;">UÄitavanje...</p>
                </div>
            </div>

            <!-- Detaljni Pregled - All Odjeli Table -->
            <div class="section">
                <h2>ğŸ“Š Detaljni Pregled - Svi Odjeli</h2>
                <p>Kompletna analiza svih odjela sa projekat realizacijom</p>
                <div class="controls-bar" style="margin-top: 20px;">
                    <input type="text" class="search-input" id="analytics-search" placeholder="ğŸ” PretraÅ¾i po odjelu..." onkeyup="filterAnalyticsTable()">
                    <button class="btn btn-primary" onclick="exportTableToCSV('analytics-odjeli')">ğŸ“¥ Export CSV</button>
                </div>
                <div style="overflow-x: auto; -webkit-overflow-scrolling: touch;">
                    <table class="monthly-table" id="analytics-odjeli-main-table">
                        <thead>
                            <tr>
                                <th onclick="sortTable(0, 'analytics-odjeli-main-table')">Odjel â‡…</th>
                                <th class="right" onclick="sortTable(1, 'analytics-odjeli-main-table')">SjeÄa (mÂ³) â‡…</th>
                                <th class="right" onclick="sortTable(2, 'analytics-odjeli-main-table')">Otprema (mÂ³) â‡…</th>
                                <th class="right" onclick="sortTable(3, 'analytics-odjeli-main-table')">Projekat â‡…</th>
                                <th class="right" onclick="sortTable(4, 'analytics-odjeli-main-table')">% Ostvareno â‡…</th>
                                <th class="right" onclick="sortTable(5, 'analytics-odjeli-main-table')">Razlika â‡…</th>
                            </tr>
                        </thead>
                        <tbody id="analytics-odjeli-table"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- KUPCI CONTENT -->
        <div id="kupci-content" class="container hidden">
            <div class="page-header">
                <div class="page-header-left">
                    <h1>ğŸ“¦ Analiza Kupaca</h1>
                    <p>Detaljni pregled kupaca po sortimentima i mjeseÄni trend</p>
                </div>
            </div>

            <!-- Top 5 Kupaca po Sortimentima -->
            <div class="section">
                <h2>ğŸ† Top 5 Kupaca po Sortimentima</h2>
                <p>Najbolji kupci za svaku kategoriju sortimenta</p>

                <div class="analytics-grid">
                    <!-- TRUPCI ÄŒETINARA -->
                    <div class="section">
                        <h3>ğŸŒ² TRUPCI ÄŒETINARA</h3>
                        <div id="kupci-trupci-cetinara">
                            <p style="color: #6b7280; text-align: center; padding: 20px;">UÄitavanje...</p>
                        </div>
                    </div>

                    <!-- CELULOZA DUGA -->
                    <div class="section">
                        <h3>ğŸ“ CELULOZA DUGA</h3>
                        <div id="kupci-celuloza-duga">
                            <p style="color: #6b7280; text-align: center; padding: 20px;">UÄitavanje...</p>
                        </div>
                    </div>

                    <!-- CELULOZA CIJEPANA -->
                    <div class="section">
                        <h3>ğŸª“ CELULOZA CIJEPANA</h3>
                        <div id="kupci-celuloza-cijepana">
                            <p style="color: #6b7280; text-align: center; padding: 20px;">UÄitavanje...</p>
                        </div>
                    </div>

                    <!-- TRUPCI LIÅ Ä†ARA -->
                    <div class="section">
                        <h3>ğŸ‚ TRUPCI LIÅ Ä†ARA</h3>
                        <div id="kupci-trupci-liscara">
                            <p style="color: #6b7280; text-align: center; padding: 20px;">UÄitavanje...</p>
                        </div>
                    </div>

                    <!-- OGRIJEV DUGI -->
                    <div class="section">
                        <h3>ğŸ”¥ OGRIJEV DUGI</h3>
                        <div id="kupci-ogrijev-dugi">
                            <p style="color: #6b7280; text-align: center; padding: 20px;">UÄitavanje...</p>
                        </div>
                    </div>

                    <!-- OGRIJEV CIJEPANI -->
                    <div class="section">
                        <h3>ğŸªµ OGRIJEV CIJEPANI</h3>
                        <div id="kupci-ogrijev-cijepani">
                            <p style="color: #6b7280; text-align: center; padding: 20px;">UÄitavanje...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Top 10 Kupaca - Ukupna Otprema -->
            <div class="section">
                <h2>ğŸ“¦ Top 10 Kupaca - Ukupna Otprema</h2>
                <p>Kupci rangirani po ukupnom volumenu otpreme</p>
                <div id="kupci-top-10-list">
                    <p style="color: #6b7280; text-align: center; padding: 20px;">UÄitavanje...</p>
                </div>
            </div>

            <!-- MjeseÄni Trend Kupaca -->
            <div class="section">
                <h2>ğŸ“ˆ MjeseÄni Trend Kupaca</h2>
                <p>Koji kupci su bili aktivni po mjesecima</p>
                <div style="overflow-x: auto;">
                    <table class="monthly-table" id="kupci-mjesecni-table">
                        <thead>
                            <tr>
                                <th style="text-align: left;">Kupac</th>
                                <th class="right">Jan</th>
                                <th class="right">Feb</th>
                                <th class="right">Mar</th>
                                <th class="right">Apr</th>
                                <th class="right">Maj</th>
                                <th class="right">Jun</th>
                                <th class="right">Jul</th>
                                <th class="right">Avg</th>
                                <th class="right">Sep</th>
                                <th class="right">Okt</th>
                                <th class="right">Nov</th>
                                <th class="right">Dec</th>
                                <th class="right" style="font-weight: 700;">UKUPNO</th>
                            </tr>
                        </thead>
                        <tbody id="kupci-mjesecni-tbody">
                            <tr><td colspan="14" style="text-align: center; color: #6b7280; padding: 20px;">UÄitavanje...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- POSLOVOÄA CONTENT - STANJE ODJELA -->
        <div id="poslovodja-stanje-content" class="container hidden">
            <div class="page-header">
                <div class="page-header-left">
                    <h1>ğŸ“Š Stanje Odjela</h1>
                    <p>Pregled stanja odjela sa vaÅ¡ih radiliÅ¡ta</p>
                </div>
                <div class="page-header-right">
                    <button class="btn btn-primary" onclick="loadPoslovodjaStanje()">ğŸ”„ OsvjeÅ¾i</button>
                </div>
            </div>
            <div id="poslovodja-radilista-info" class="section" style="background: #eff6ff; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px;">
                    <p style="margin: 0; color: #1e40af; font-weight: 600;">ğŸ“ VaÅ¡a radiliÅ¡ta: <span id="poslovodja-radilista-list"></span></p>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <label for="poslovodja-radiliste-select" style="color: #1e40af; font-weight: 600; white-space: nowrap;">Filtriraj po radiliÅ¡tu:</label>
                        <select id="poslovodja-radiliste-select" onchange="filterPoslovodjaStanje()" style="padding: 8px 12px; border: 2px solid #3b82f6; border-radius: 6px; font-size: 14px; background: white; color: #1e40af; font-weight: 600; cursor: pointer; min-width: 200px;">
                            <option value="">Sva radiliÅ¡ta</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="section">
                <div style="overflow-x: auto; -webkit-overflow-scrolling: touch;">
                    <table class="monthly-table" id="poslovodja-stanje-table">
                        <thead id="poslovodja-stanje-header"></thead>
                        <tbody id="poslovodja-stanje-body"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- ADMIN STANJE ODJELA CONTENT -->
        <div id="stanje-odjela-admin-content" class="container hidden">
            <div class="page-header">
                <div class="page-header-left">
                    <h1>ğŸ“¦ Stanje Odjela</h1>
                    <p>Pregled stanja odjela i zaliha</p>
                </div>
            </div>

            <!-- Tab submenu za Stanje Odjela -->
            <div class="tabs-submenu" style="margin-bottom: 24px;">
                <button class="tab-sub active" onclick="switchStanjeOdjelaTab('pregled')">ğŸ“‹ Pregled Stanja</button>
                <button class="tab-sub" onclick="switchStanjeOdjelaTab('suma-lager')">ğŸ­ Å uma Lager</button>
            </div>

            <!-- Pregled Stanja View (Original Stanje Odjela) -->
            <div id="stanje-pregled-view" class="stanje-view">
                <div class="page-header-right" style="margin-bottom: 20px;">
                    <button class="btn btn-secondary" onclick="syncStanjeOdjelaCache()">â™»ï¸ AÅ¾uriraj cache</button>
                    <button class="btn btn-primary" onclick="loadAdminStanjeOdjela()">ğŸ”„ OsvjeÅ¾i prikaz</button>
                </div>
                <div class="section">
                    <div style="overflow-x: auto; -webkit-overflow-scrolling: touch;">
                        <table class="monthly-table" id="admin-stanje-table">
                            <thead id="admin-stanje-header"></thead>
                            <tbody id="admin-stanje-body"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Å uma Lager View -->
            <div id="stanje-suma-lager-view" class="stanje-view hidden">
                <div class="page-header-right" style="margin-bottom: 20px;">
                    <span class="badge success">GodiÅ¡nji pregled</span>
                </div>

                <!-- KPI Metrics Cards -->
                <div class="cards">
                    <div class="card">
                        <div class="card-label">Ukupna Zaliha</div>
                        <div class="card-value green" id="suma-lager-total">0 mÂ³</div>
                    </div>
                    <div class="card">
                        <div class="card-label">ProsjeÄna Zaliha</div>
                        <div class="card-value blue" id="suma-lager-average">0 mÂ³</div>
                    </div>
                    <div class="card">
                        <div class="card-label">Broj Odjela sa Zalihom</div>
                        <div class="card-value red" id="suma-lager-count">0</div>
                    </div>
                </div>

                <!-- Top 5 Odjela by Zaliha -->
                <div class="section">
                    <h2>ğŸ† Top 5 Odjela - NajveÄ‡a Zaliha</h2>
                    <p>Pet odjela sa najveÄ‡om zalihom drva na lageru</p>
                    <div id="suma-lager-top5">
                        <p style="color: #6b7280; text-align: center; padding: 20px;">UÄitavanje...</p>
                    </div>
                </div>

                <!-- Zaliha Chart - Bar Chart -->
                <div class="section">
                    <h2>ğŸ“Š GrafiÄki Prikaz Zaliha</h2>
                    <p>Top 10 odjela po zalihama (mÂ³)</p>
                    <div class="chart-container" style="height: auto; padding: 20px;">
                        <div id="suma-lager-chart"></div>
                    </div>
                </div>

                <!-- Detaljni Pregled - All Odjeli Table -->
                <div class="section">
                    <h2>ğŸ“‹ Detaljni Pregled - Svi Odjeli</h2>
                    <p>Kompletna tablica svih odjela sa zalihama po sortimentima</p>
                    <div class="controls-bar" style="margin-top: 20px;">
                        <input type="text" class="search-input" id="suma-lager-search" placeholder="ğŸ” PretraÅ¾i po odjelu..." onkeyup="filterSumaLagerTable()">
                        <button class="btn btn-primary" onclick="exportSumaLagerToCSV()">ğŸ“¥ Export CSV</button>
                    </div>
                    <div style="overflow-x: auto; -webkit-overflow-scrolling: touch;">
                        <table class="monthly-table" id="suma-lager-main-table" style="font-size: 11px;">
                            <thead>
                                <tr>
                                    <th style="min-width: 180px;"></th>
                                    <th class="right" style="min-width: 70px;">F/L ÄŒ</th>
                                    <th class="right" style="min-width: 70px;">I ÄŒ</th>
                                    <th class="right" style="min-width: 70px;">II ÄŒ</th>
                                    <th class="right" style="min-width: 70px;">III ÄŒ</th>
                                    <th class="right" style="min-width: 70px;">RD</th>
                                    <th class="right" style="min-width: 80px;">TRUPCI ÄŒ</th>
                                    <th class="right" style="min-width: 90px;">CEL.DUGA</th>
                                    <th class="right" style="min-width: 100px;">CEL.CIJEPANA</th>
                                    <th class="right" style="min-width: 70px;">Å KART</th>
                                    <th class="right" style="min-width: 80px;">Î£ ÄŒETINARI</th>
                                    <th class="right" style="min-width: 70px;">F/L L</th>
                                    <th class="right" style="min-width: 70px;">I L</th>
                                    <th class="right" style="min-width: 70px;">II L</th>
                                    <th class="right" style="min-width: 70px;">III L</th>
                                    <th class="right" style="min-width: 80px;">TRUPCI L</th>
                                    <th class="right" style="min-width: 90px;">OGR. DUGI</th>
                                    <th class="right" style="min-width: 100px;">OGR. CIJEPANI</th>
                                    <th class="right" style="min-width: 70px;">GULE</th>
                                    <th class="right" style="min-width: 80px;">LIÅ Ä†ARI</th>
                                    <th class="right" style="min-width: 100px; font-weight: 700;">UKUPNO ÄŒ+L</th>
                                </tr>
                            </thead>
                            <tbody id="suma-lager-table"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- POSLOVOÄA CONTENT - ODJELI U REALIZACIJI -->
        <div id="poslovodja-realizacija-content" class="container hidden">
            <div class="page-header">
                <div class="page-header-left">
                    <h1>ğŸ—ï¸ Odjeli u realizaciji</h1>
                    <p>Trenutni odjeli u radiliÅ¡tu koji vodite</p>
                </div>
                <div class="page-header-right">
                    <button class="btn btn-primary" onclick="loadPoslovodjaRealizacija()">ğŸ”„ OsvjeÅ¾i</button>
                </div>
            </div>
            <div id="poslovodja-radilista-info-2" class="section" style="background: #eff6ff; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                <p style="margin: 0; color: #1e40af; font-weight: 600;">ğŸ“ VaÅ¡a radiliÅ¡ta: <span id="poslovodja-radilista-list-2"></span></p>
            </div>
            <div class="section">
                <div style="overflow-x: auto; -webkit-overflow-scrolling: touch;">
                    <table class="monthly-table" id="poslovodja-realizacija-table">
                        <thead id="poslovodja-realizacija-header"></thead>
                        <tbody id="poslovodja-realizacija-body"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- POSLOVOÄA CONTENT - ZADNJIH 5 DANA -->
        <div id="poslovodja-zadnjih5-content" class="container hidden">
            <div class="page-header">
                <div class="page-header-left">
                    <h1>ğŸ“… Zadnjih 5 Dana</h1>
                    <p>Pregled primke i otpreme sa vaÅ¡ih radiliÅ¡ta</p>
                </div>
                <div class="page-header-right">
                    <button class="btn btn-primary" onclick="loadPoslovodjaZadnjih5()">ğŸ”„ OsvjeÅ¾i</button>
                </div>
            </div>
            <div id="poslovodja-radilista-info-3" class="section" style="background: #eff6ff; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                <p style="margin: 0; color: #1e40af; font-weight: 600;">ğŸ“ VaÅ¡a radiliÅ¡ta: <span id="poslovodja-radilista-list-3"></span></p>
            </div>

            <!-- PRIMKA Zadnjih 5 dana -->
            <div class="section">
                <h2 style="color: #059669; margin-bottom: 15px;">ğŸŒ² PRIMKA - Zadnjih 5 Dana</h2>
                <div style="overflow-x: auto; -webkit-overflow-scrolling: touch;">
                    <table class="monthly-table" id="poslovodja-primka-table">
                        <thead id="poslovodja-primka-header"></thead>
                        <tbody id="poslovodja-primka-body"></tbody>
                    </table>
                </div>
            </div>

            <!-- OTPREMA Zadnjih 5 dana -->
            <div class="section" style="margin-top: 30px;">
                <h2 style="color: #dc2626; margin-bottom: 15px;">ğŸš› OTPREMA - Zadnjih 5 Dana</h2>
                <div style="overflow-x: auto; -webkit-overflow-scrolling: touch;">
                    <table class="monthly-table" id="poslovodja-otprema-table">
                        <thead id="poslovodja-otprema-header"></thead>
                        <tbody id="poslovodja-otprema-body"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- POSLOVOÄA CONTENT - SUMA MJESECA -->
        <div id="poslovodja-suma-content" class="container hidden">
            <div class="page-header">
                <div class="page-header-left">
                    <h1>ğŸ“ˆ Suma Mjeseca</h1>
                    <p>MjeseÄne sume za odjele i radiliÅ¡ta</p>
                </div>
                <div class="page-header-right">
                    <button class="btn btn-primary" onclick="loadPoslovodjaSuma()">ğŸ”„ OsvjeÅ¾i</button>
                </div>
            </div>
            <div id="poslovodja-radilista-info-4" class="section" style="background: #eff6ff; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                <p style="margin: 0; color: #1e40af; font-weight: 600;">ğŸ“ VaÅ¡a radiliÅ¡ta: <span id="poslovodja-radilista-list-4"></span></p>
            </div>

            <!-- Suma mjeseca za ODJELE -->
            <div class="section">
                <h2 style="color: #059669; margin-bottom: 15px;">ğŸ“Š SUMA MJESECA - Po Odjelima</h2>
                <div style="overflow-x: auto; -webkit-overflow-scrolling: touch;">
                    <table class="monthly-table" id="poslovodja-suma-odjeli-table">
                        <thead id="poslovodja-suma-odjeli-header"></thead>
                        <tbody id="poslovodja-suma-odjeli-body"></tbody>
                    </table>
                </div>
            </div>

            <!-- Suma mjeseca za RADILIÅ TE -->
            <div class="section" style="margin-top: 30px;">
                <h2 style="color: #dc2626; margin-bottom: 15px;">ğŸ“ SUMA MJESECA - Po RadiliÅ¡tima</h2>
                <div style="overflow-x: auto; -webkit-overflow-scrolling: touch;">
                    <table class="monthly-table" id="poslovodja-suma-radiliste-table">
                        <thead id="poslovodja-suma-radiliste-header"></thead>
                        <tbody id="poslovodja-suma-radiliste-body"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- DINAMIKA CONTENT -->
        <div id="dinamika-content" class="container hidden">
            <div class="page-header">
                <div class="page-header-left">
                    <h1>ğŸ“Š GodiÅ¡nja dinamika <span id="dinamika-selected-year">2026</span></h1>
                    <p>Planirana mjeseÄna dinamika sjeÄe (mÂ³) za tekuÄ‡u godinu</p>
                </div>
            </div>

            <!-- Forma za unos mjeseÄne dinamike -->
            <div class="section">
                <h2>MjeseÄni plan sjeÄe</h2>
                <form id="dinamika-form" onsubmit="saveDinamika(event)">
                    <div style="overflow-x: auto;">
                        <table class="expert-table" id="dinamika-table">
                            <thead>
                                <tr>
                                    <th style="width: 200px;">Mjesec</th>
                                    <th style="width: 250px;">Planirana koliÄina (mÂ³)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Januar</strong></td>
                                    <td><input type="number" id="dinamika-01" class="form-control" step="0.01" min="0" placeholder="0.00" style="width: 100%;"></td>
                                </tr>
                                <tr>
                                    <td><strong>Februar</strong></td>
                                    <td><input type="number" id="dinamika-02" class="form-control" step="0.01" min="0" placeholder="0.00" style="width: 100%;"></td>
                                </tr>
                                <tr>
                                    <td><strong>Mart</strong></td>
                                    <td><input type="number" id="dinamika-03" class="form-control" step="0.01" min="0" placeholder="0.00" style="width: 100%;"></td>
                                </tr>
                                <tr>
                                    <td><strong>April</strong></td>
                                    <td><input type="number" id="dinamika-04" class="form-control" step="0.01" min="0" placeholder="0.00" style="width: 100%;"></td>
                                </tr>
                                <tr>
                                    <td><strong>Maj</strong></td>
                                    <td><input type="number" id="dinamika-05" class="form-control" step="0.01" min="0" placeholder="0.00" style="width: 100%;"></td>
                                </tr>
                                <tr>
                                    <td><strong>Juni</strong></td>
                                    <td><input type="number" id="dinamika-06" class="form-control" step="0.01" min="0" placeholder="0.00" style="width: 100%;"></td>
                                </tr>
                                <tr>
                                    <td><strong>Juli</strong></td>
                                    <td><input type="number" id="dinamika-07" class="form-control" step="0.01" min="0" placeholder="0.00" style="width: 100%;"></td>
                                </tr>
                                <tr>
                                    <td><strong>Avgust</strong></td>
                                    <td><input type="number" id="dinamika-08" class="form-control" step="0.01" min="0" placeholder="0.00" style="width: 100%;"></td>
                                </tr>
                                <tr>
                                    <td><strong>Septembar</strong></td>
                                    <td><input type="number" id="dinamika-09" class="form-control" step="0.01" min="0" placeholder="0.00" style="width: 100%;"></td>
                                </tr>
                                <tr>
                                    <td><strong>Oktobar</strong></td>
                                    <td><input type="number" id="dinamika-10" class="form-control" step="0.01" min="0" placeholder="0.00" style="width: 100%;"></td>
                                </tr>
                                <tr>
                                    <td><strong>Novembar</strong></td>
                                    <td><input type="number" id="dinamika-11" class="form-control" step="0.01" min="0" placeholder="0.00" style="width: 100%;"></td>
                                </tr>
                                <tr>
                                    <td><strong>Decembar</strong></td>
                                    <td><input type="number" id="dinamika-12" class="form-control" step="0.01" min="0" placeholder="0.00" style="width: 100%;"></td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr style="background: linear-gradient(135deg, #047857 0%, #065f46 100%); color: white; font-weight: bold; font-size: 16px;">
                                    <td style="text-align: right; padding: 16px;">UKUPNO GODIÅ NJE:</td>
                                    <td style="padding: 16px;"><span id="dinamika-total">0.00</span> mÂ³</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                    <div style="margin-top: 24px; text-align: right;">
                        <button type="submit" class="btn btn-primary" style="font-size: 16px; padding: 12px 32px;">
                            ğŸ’¾ Spremi dinamiku
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- UPOREDBA GODINA CONTENT -->
        <div id="uporedba-godina-content" class="container hidden">
            <div class="page-header">
                <div class="page-header-left">
                    <h1>ğŸ“Š Uporedba godina</h1>
                    <p>Side-by-side prikaz sjeÄe i otpreme po godinama</p>
                </div>
            </div>

            <!-- Izbor godina za usporedbu -->
            <div class="section">
                <div class="controls-bar" style="justify-content: center; align-items: center; gap: 24px;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <label for="uporedba-year1" style="font-weight: 600; font-size: 16px;">ğŸ“… Godina 1:</label>
                        <select id="uporedba-year1" class="year-select" onchange="loadUporedbaGodina()" style="padding: 10px 16px; font-size: 16px; border-radius: 8px; border: 2px solid #047857; min-width: 120px;">
                            
                            
                            <option value="2026" selected>2026</option></select>
                    </div>
                    <span style="font-size: 24px; font-weight: bold;">VS</span>
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <label for="uporedba-year2" style="font-weight: 600; font-size: 16px;">ğŸ“… Godina 2:</label>
                        <select id="uporedba-year2" class="year-select" onchange="loadUporedbaGodina()" style="padding: 10px 16px; font-size: 16px; border-radius: 8px; border: 2px solid #2563eb; min-width: 120px;">
                            
                            
                            <option value="2026" selected>2026</option></select>
                    </div>
                </div>
            </div>

            <!-- MjeseÄna usporedba -->
            <div class="section">
                <h2>ğŸ“… MjeseÄna usporedba sjeÄe i otpreme</h2>
                <div style="overflow-x: auto;">
                    <table class="expert-table" id="uporedba-mjesecna-table">
                        <thead id="uporedba-mjesecna-header"></thead>
                        <tbody id="uporedba-mjesecna-body"></tbody>
                        <tfoot id="uporedba-mjesecna-footer"></tfoot>
                    </table>
                </div>
            </div>

            <!-- GodiÅ¡nje ukupno -->
            <div class="section">
                <h2>ğŸ“Š GodiÅ¡nje ukupno i razlike</h2>
                <div style="overflow-x: auto;">
                    <table class="expert-table" id="uporedba-ukupno-table">
                        <thead id="uporedba-ukupno-header"></thead>
                        <tbody id="uporedba-ukupno-body"></tbody>
                    </table>
                </div>
            </div>

            <!-- Top 10 odjela -->
            <div class="section">
                <h2>ğŸ† Top 10 odjela po realizaciji</h2>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
                    <div>
                        <h3 id="uporedba-top10-year1-title" style="text-align: center; margin-bottom: 16px;">Godina 2025</h3>
                        <div style="overflow-x: auto;">
                            <table class="expert-table" id="uporedba-top10-year1-table">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Odjel</th>
                                        <th style="text-align: right;">SjeÄa (mÂ³)</th>
                                    </tr>
                                </thead>
                                <tbody id="uporedba-top10-year1-body"></tbody>
                            </table>
                        </div>
                    </div>
                    <div>
                        <h3 id="uporedba-top10-year2-title" style="text-align: center; margin-bottom: 16px;">Godina 2026</h3>
                        <div style="overflow-x: auto;">
                            <table class="expert-table" id="uporedba-top10-year2-table">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Odjel</th>
                                        <th style="text-align: right;">SjeÄa (mÂ³)</th>
                                    </tr>
                                </thead>
                                <tbody id="uporedba-top10-year2-body"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- KUBIKATOR CONTENT -->
        <div id="kubikator-content" class="container hidden">
            <div class="page-header">
                <h1>ğŸ“ Kubikator</h1>
                <p>Kalkulator zapremine oblog drveta - Huber metoda</p>
            </div>

            <div class="section">
                <!-- Input forma -->
                <div class="card" style="max-width: 600px; margin: 0 auto;">
                    <h3 style="margin-bottom: 20px;">Unos podataka</h3>

                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">PreÄnik na sredini (cm)</label>
                        <input type="number" id="kubikator-promjer" class="filter-input" placeholder="od 7 do 150 cm" style="width: 100%; font-size: 16px; padding: 12px;" min="7" max="150" step="1">
                        <small style="color: #6b7280;">Dozvoljen raspon: 7-150 cm</small>
                    </div>

                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">DuÅ¾ina (m)</label>
                        <input type="number" id="kubikator-duzina" class="filter-input" placeholder="od 2 do 8 metara (npr. 4.53)" style="width: 100%; font-size: 16px; padding: 12px;" min="2" max="8" step="0.01">
                        <small style="color: #6b7280;">Dozvoljen raspon: 2-8 m (2 decimale)</small>
                    </div>

                    <button class="btn btn-primary" onclick="izracunajKubikazu()" style="width: 100%; padding: 16px; font-size: 18px; font-weight: 700;">
                        ğŸ§® IZRAÄŒUNAJ
                    </button>
                </div>

                <!-- Rezultat -->
                <div id="kubikator-rezultat" class="card" style="max-width: 600px; margin: 30px auto; display: none;">
                    <h3 style="margin-bottom: 16px; color: #059669;">ğŸ“Š Zapremina (Oblovina bez kore)</h3>
                    <div style="text-align: center; font-size: 48px; font-weight: 700; color: #059669; padding: 20px; background: #f0fdf4; border-radius: 12px; margin-bottom: 20px;">
                        <span id="kubikator-obujam-display">0.00</span> mÂ³
                    </div>
                </div>

                <!-- Tabela sa rekapitulacijom -->
                <div id="kubikator-tabela-container" class="card" style="max-width: 900px; margin: 30px auto; display: none; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
                    <!-- Header sa naslovom i akcijama -->
                    <div style="background: linear-gradient(135deg, #047857 0%, #065f46 100%); color: white; padding: 24px; border-radius: 12px 12px 0 0;">
                        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 12px;">
                            <div>
                                <h3 style="margin: 0 0 8px 0; font-size: 22px;">ğŸ“‹ Rekapitulacija mjerenja</h3>
                                <p style="margin: 0; opacity: 0.9; font-size: 14px;">ğŸ“… Datum: <span id="kubikator-datum"></span></p>
                            </div>
                            <div style="display: flex; gap: 10px;">
                                <button class="btn btn-secondary" onclick="ocistiKubikator()" style="background: rgba(255,255,255,0.2); border: 2px solid white; color: white; font-weight: 600;">ğŸ—‘ï¸ OÄisti</button>
                                <button class="btn btn-primary" onclick="isprintajKubikator()" style="background: white; color: #047857; border: none; font-weight: 700;">ğŸ–¨ï¸ Isprintaj</button>
                            </div>
                        </div>
                    </div>

                    <!-- Tabela -->
                    <div style="padding: 24px;">
                        <div style="overflow-x: auto;">
                            <table class="monthly-table" style="min-width: 700px; box-shadow: none;">
                                <thead>
                                    <tr style="background: #f9fafb; border-bottom: 2px solid #047857;">
                                        <th style="color: #047857; font-weight: 700; padding: 16px;">R.B.</th>
                                        <th style="color: #047857; font-weight: 700; padding: 16px;">PreÄnik (cm)</th>
                                        <th style="color: #047857; font-weight: 700; padding: 16px;">DuÅ¾ina (m)</th>
                                        <th style="color: #047857; font-weight: 700; padding: 16px;">Zapremina (mÂ³)</th>
                                        <th style="color: #047857; font-weight: 700; padding: 16px;">Akcija</th>
                                    </tr>
                                </thead>
                                <tbody id="kubikator-tabela-body"></tbody>
                            </table>
                        </div>

                        <!-- Ukupno - stilizovano -->
                        <div style="margin-top: 24px; background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%); border-radius: 12px; padding: 24px; border: 3px solid #059669;">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
                                <div style="text-align: center;">
                                    <div style="font-size: 14px; color: #065f46; font-weight: 600; margin-bottom: 8px; text-transform: uppercase;">Ukupno komada</div>
                                    <div style="font-size: 36px; font-weight: 700; color: #047857;">
                                        <span id="kubikator-ukupno-kom">0</span> <span style="font-size: 20px;">kom</span>
                                    </div>
                                </div>
                                <div style="text-align: center;">
                                    <div style="font-size: 14px; color: #065f46; font-weight: 600; margin-bottom: 8px; text-transform: uppercase;">Ukupna zapremina</div>
                                    <div style="font-size: 36px; font-weight: 700; color: #047857;">
                                        <span id="kubikator-ukupno-m3">0.00</span> <span style="font-size: 20px;">mÂ³</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- IZVJEÅ TAJI CONTENT (ADMIN/OPERATIVA/POSLOVOÄA) -->
        <div id="izvjestaji-content" class="container hidden">
            <div class="page-header">
                <div class="page-header-left">
                    <h1>ğŸ“‹ IzvjeÅ¡taji</h1>
                    <p>SedmiÄni i mjeseÄni prikaz po odjelima</p>
                </div>
            </div>

            <!-- SUB-MENU TABS -->
            <div class="sub-tabs" style="margin-bottom: 30px;">
                <button class="sub-tab active" onclick="switchIzvjestajiSubTab('sedmicni')">ğŸ“Š SedmiÄni izvjeÅ¡taj</button>
                <button class="sub-tab" onclick="switchIzvjestajiSubTab('mjesecni')">ğŸ“… MjeseÄni izvjeÅ¡taj</button>
            </div>

            <!-- SEDMIÄŒNI IZVJEÅ TAJ -->
            <div id="izvjestaji-sedmicni" class="sub-content">
                <div class="page-header" style="margin-top: 0;">
                    <div class="page-header-left">
                        <h2>ğŸ“Š SedmiÄni izvjeÅ¡taj</h2>
                        <p>SjeÄa i otprema po odjelima - radna sedmica</p>
                    </div>
                    <div class="page-header-right">
                        <select id="izvjestaji-sedmicni-year" class="year-select" onchange="loadIzvjestajiSedmicni()">
                            <option value="2026" selected>2026</option>
                            <option value="2025">2025</option>
                            <option value="2024">2024</option>
                        </select>
                        <select id="izvjestaji-sedmicni-month" class="month-select" onchange="loadIzvjestajiSedmicni()">
                            <option value="0">Januar</option>
                            <option value="1">Februar</option>
                            <option value="2">Mart</option>
                            <option value="3">April</option>
                            <option value="4">Maj</option>
                            <option value="5">Juni</option>
                            <option value="6">Juli</option>
                            <option value="7">August</option>
                            <option value="8">Septembar</option>
                            <option value="9">Oktobar</option>
                            <option value="10">Novembar</option>
                            <option value="11">Decembar</option>
                        </select>
                    </div>
                </div>

                <!-- SJEÄŒA PO ODJELIMA -->
                <div class="section">
                    <h2>ğŸŒ² SjeÄa po odjelima - <span id="izvjestaji-sedmicni-primka-title"></span></h2>
                    <p style="color: #6b7280; margin-bottom: 20px;">Sortirano po ukupnoj koliÄini (najveÄ‡e na vrhu)</p>
                    <div class="controls-bar">
                        <input type="text" class="search-input" id="izvjestaji-sedmicni-primka-search" placeholder="ğŸ” PretraÅ¾i po odjelu..." onkeyup="filterIzvjestajiTable('sedmicni-primka')">
                        <button class="btn btn-primary" onclick="exportTableToCSV('izvjestaji-sedmicni-primka')">ğŸ“¥ Export CSV</button>
                    </div>
                    <div style="overflow-x: auto;">
                        <table id="izvjestaji-sedmicni-primka-table" class="izvjestaji-table">
                            <thead id="izvjestaji-sedmicni-primka-header"></thead>
                            <tbody id="izvjestaji-sedmicni-primka-body"></tbody>
                        </table>
                    </div>
                </div>

                <!-- OTPREMA PO ODJELIMA -->
                <div class="section">
                    <h2>ğŸš› Otprema po odjelima - <span id="izvjestaji-sedmicni-otprema-title"></span></h2>
                    <p style="color: #6b7280; margin-bottom: 20px;">Sortirano po ukupnoj koliÄini (najveÄ‡e na vrhu)</p>
                    <div class="controls-bar">
                        <input type="text" class="search-input" id="izvjestaji-sedmicni-otprema-search" placeholder="ğŸ” PretraÅ¾i po odjelu..." onkeyup="filterIzvjestajiTable('sedmicni-otprema')">
                        <button class="btn btn-primary" onclick="exportTableToCSV('izvjestaji-sedmicni-otprema')">ğŸ“¥ Export CSV</button>
                    </div>
                    <div style="overflow-x: auto;">
                        <table id="izvjestaji-sedmicni-otprema-table" class="izvjestaji-table">
                            <thead id="izvjestaji-sedmicni-otprema-header"></thead>
                            <tbody id="izvjestaji-sedmicni-otprema-body"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- MJESEÄŒNI IZVJEÅ TAJ -->
            <div id="izvjestaji-mjesecni" class="sub-content hidden">
                <div class="page-header" style="margin-top: 0;">
                    <div class="page-header-left">
                        <h2>ğŸ“… MjeseÄni izvjeÅ¡taj</h2>
                        <p>SjeÄa i otprema po odjelima - cijeli mjesec</p>
                    </div>
                    <div class="page-header-right">
                        <select id="izvjestaji-mjesecni-year" class="year-select" onchange="loadIzvjestajiMjesecni()">
                            <option value="2026" selected>2026</option>
                            <option value="2025">2025</option>
                            <option value="2024">2024</option>
                        </select>
                        <select id="izvjestaji-mjesecni-month" class="month-select" onchange="loadIzvjestajiMjesecni()">
                            <option value="0">Januar</option>
                            <option value="1">Februar</option>
                            <option value="2">Mart</option>
                            <option value="3">April</option>
                            <option value="4">Maj</option>
                            <option value="5">Juni</option>
                            <option value="6">Juli</option>
                            <option value="7">August</option>
                            <option value="8">Septembar</option>
                            <option value="9">Oktobar</option>
                            <option value="10">Novembar</option>
                            <option value="11">Decembar</option>
                        </select>
                    </div>
                </div>

                <!-- SJEÄŒA PO ODJELIMA -->
                <div class="section">
                    <h2>ğŸŒ² SjeÄa po odjelima - <span id="izvjestaji-mjesecni-primka-title"></span></h2>
                    <p style="color: #6b7280; margin-bottom: 20px;">Sortirano po ukupnoj koliÄini (najveÄ‡e na vrhu)</p>
                    <div class="controls-bar">
                        <input type="text" class="search-input" id="izvjestaji-mjesecni-primka-search" placeholder="ğŸ” PretraÅ¾i po odjelu..." onkeyup="filterIzvjestajiTable('mjesecni-primka')">
                        <button class="btn btn-primary" onclick="exportTableToCSV('izvjestaji-mjesecni-primka')">ğŸ“¥ Export CSV</button>
                    </div>
                    <div style="overflow-x: auto;">
                        <table id="izvjestaji-mjesecni-primka-table" class="izvjestaji-table">
                            <thead id="izvjestaji-mjesecni-primka-header"></thead>
                            <tbody id="izvjestaji-mjesecni-primka-body"></tbody>
                        </table>
                    </div>
                </div>

                <!-- OTPREMA PO ODJELIMA -->
                <div class="section">
                    <h2>ğŸš› Otprema po odjelima - <span id="izvjestaji-mjesecni-otprema-title"></span></h2>
                    <p style="color: #6b7280; margin-bottom: 20px;">Sortirano po ukupnoj koliÄini (najveÄ‡e na vrhu)</p>
                    <div class="controls-bar">
                        <input type="text" class="search-input" id="izvjestaji-mjesecni-otprema-search" placeholder="ğŸ” PretraÅ¾i po odjelu..." onkeyup="filterIzvjestajiTable('mjesecni-otprema')">
                        <button class="btn btn-primary" onclick="exportTableToCSV('izvjestaji-mjesecni-otprema')">ğŸ“¥ Export CSV</button>
                    </div>
                    <div style="overflow-x: auto;">
                        <table id="izvjestaji-mjesecni-otprema-table" class="izvjestaji-table">
                            <thead id="izvjestaji-mjesecni-otprema-header"></thead>
                            <tbody id="izvjestaji-mjesecni-otprema-body"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- PRIMAC IZVJEÅ TAJI CONTENT -->
        <div id="izvjestaji-primac-content" class="container hidden">
            <div class="page-header">
                <div class="page-header-left">
                    <h1>ğŸ“‹ IzvjeÅ¡taji sjeÄe</h1>
                    <p>SedmiÄni i mjeseÄni prikazi</p>
                </div>
            </div>

            <!-- SUB-MENU TABS -->
            <div class="sub-tabs" style="margin-bottom: 30px;">
                <button class="sub-tab active" onclick="switchPrimacIzvjestajiSubTab('sedmicni')">ğŸ“Š SedmiÄni izvjeÅ¡taj</button>
                <button class="sub-tab" onclick="switchPrimacIzvjestajiSubTab('mjesecni')">ğŸ“… MjeseÄni izvjeÅ¡taj</button>
            </div>

            <!-- SEDMIÄŒNI IZVJEÅ TAJ -->
            <div id="primac-sedmicni-izvjestaj" class="sub-content">
                <div class="page-header" style="margin-top: 0;">
                    <div class="page-header-left">
                        <h2>ğŸ“Š SedmiÄni izvjeÅ¡taj sjeÄe</h2>
                        <p>Suma sjeÄe po sortimentima za radnu sedmicu</p>
                    </div>
                    <div class="page-header-right">
                        <select id="primac-sedmicni-year" class="year-select" onchange="loadPrimacSedmicni()">
                            <option value="2026" selected>2026</option></select>
                        <select id="primac-sedmicni-month" class="month-select" onchange="loadPrimacSedmicni()">
                            <option value="0">Januar</option>
                            <option value="1">Februar</option>
                            <option value="2">Mart</option>
                            <option value="3">April</option>
                            <option value="4">Maj</option>
                            <option value="5">Juni</option>
                            <option value="6">Juli</option>
                            <option value="7">August</option>
                            <option value="8">Septembar</option>
                            <option value="9">Oktobar</option>
                            <option value="10">Novembar</option>
                            <option value="11">Decembar</option>
                        </select>
                    </div>
                </div>

                <div class="section">
                    <div style="overflow-x: auto;">
                        <table class="expert-table" id="primac-sedmicni-table">
                            <thead id="primac-sedmicni-header"></thead>
                            <tbody id="primac-sedmicni-body"></tbody>
                            <tfoot id="primac-sedmicni-footer"></tfoot>
                        </table>
                    </div>
                </div>
            </div>

            <!-- MJESEÄŒNI IZVJEÅ TAJ -->
            <div id="primac-mjesecni-izvjestaj" class="sub-content hidden">
                <div class="page-header" style="margin-top: 0;">
                    <div class="page-header-left">
                        <h2>ğŸ“… MjeseÄni izvjeÅ¡taj sjeÄe</h2>
                        <p>Suma sjeÄe po sortimentima za mjesec</p>
                    </div>
                    <div class="page-header-right">
                        <select id="primac-mjesecni-year" class="year-select" onchange="loadPrimacMjesecni()">
                            <option value="2026" selected>2026</option></select>
                        <select id="primac-mjesecni-month" class="month-select" onchange="loadPrimacMjesecni()">
                            <option value="0">Januar</option>
                            <option value="1">Februar</option>
                            <option value="2">Mart</option>
                            <option value="3">April</option>
                            <option value="4">Maj</option>
                            <option value="5">Juni</option>
                            <option value="6">Juli</option>
                            <option value="7">August</option>
                            <option value="8">Septembar</option>
                            <option value="9">Oktobar</option>
                            <option value="10">Novembar</option>
                            <option value="11">Decembar</option>
                        </select>
                    </div>
                </div>

                <div class="section">
                    <div style="overflow-x: auto;">
                        <table class="expert-table" id="primac-mjesecni-table">
                            <thead id="primac-mjesecni-header"></thead>
                            <tbody id="primac-mjesecni-body"></tbody>
                            <tfoot id="primac-mjesecni-footer"></tfoot>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- OTPREMAC IZVJEÅ TAJI CONTENT -->
        <div id="izvjestaji-otpremac-content" class="container hidden">
            <div class="page-header">
                <div class="page-header-left">
                    <h1>ğŸ“‹ IzvjeÅ¡taji otpreme</h1>
                    <p>SedmiÄni i mjeseÄni prikazi</p>
                </div>
            </div>

            <!-- SUB-MENU TABS -->
            <div class="sub-tabs" style="margin-bottom: 30px;">
                <button class="sub-tab active" onclick="switchOtpremacIzvjestajiSubTab('sedmicni')">ğŸ“Š SedmiÄni izvjeÅ¡taj</button>
                <button class="sub-tab" onclick="switchOtpremacIzvjestajiSubTab('mjesecni')">ğŸ“… MjeseÄni izvjeÅ¡taj</button>
            </div>

            <!-- SEDMIÄŒNI IZVJEÅ TAJ -->
            <div id="otpremac-sedmicni-izvjestaj" class="sub-content">
                <div class="page-header" style="margin-top: 0;">
                    <div class="page-header-left">
                        <h2>ğŸ“Š SedmiÄni izvjeÅ¡taj otpreme</h2>
                        <p>Suma otpreme po sortimentima za radnu sedmicu</p>
                    </div>
                    <div class="page-header-right">
                        <select id="otpremac-sedmicni-year" class="year-select" onchange="loadOtpremacSedmicni()">
                            <option value="2026" selected>2026</option></select>
                        <select id="otpremac-sedmicni-month" class="month-select" onchange="loadOtpremacSedmicni()">
                            <option value="0">Januar</option>
                            <option value="1">Februar</option>
                            <option value="2">Mart</option>
                            <option value="3">April</option>
                            <option value="4">Maj</option>
                            <option value="5">Juni</option>
                            <option value="6">Juli</option>
                            <option value="7">August</option>
                            <option value="8">Septembar</option>
                            <option value="9">Oktobar</option>
                            <option value="10">Novembar</option>
                            <option value="11">Decembar</option>
                        </select>
                    </div>
                </div>

                <div class="section">
                    <div style="overflow-x: auto;">
                        <table class="expert-table" id="otpremac-sedmicni-table">
                            <thead id="otpremac-sedmicni-header"></thead>
                            <tbody id="otpremac-sedmicni-body"></tbody>
                            <tfoot id="otpremac-sedmicni-footer"></tfoot>
                        </table>
                    </div>
                </div>
            </div>

            <!-- MJESEÄŒNI IZVJEÅ TAJ -->
            <div id="otpremac-mjesecni-izvjestaj" class="sub-content hidden">
                <div class="page-header" style="margin-top: 0;">
                    <div class="page-header-left">
                        <h2>ğŸ“… MjeseÄni izvjeÅ¡taj otpreme</h2>
                        <p>Suma otpreme po sortimentima za mjesec</p>
                    </div>
                    <div class="page-header-right">
                        <select id="otpremac-mjesecni-year" class="year-select" onchange="loadOtpremacMjesecni()">
                            <option value="2026" selected>2026</option></select>
                        <select id="otpremac-mjesecni-month" class="month-select" onchange="loadOtpremacMjesecni()">
                            <option value="0">Januar</option>
                            <option value="1">Februar</option>
                            <option value="2">Mart</option>
                            <option value="3">April</option>
                            <option value="4">Maj</option>
                            <option value="5">Juni</option>
                            <option value="6">Juli</option>
                            <option value="7">August</option>
                            <option value="8">Septembar</option>
                            <option value="9">Oktobar</option>
                            <option value="10">Novembar</option>
                            <option value="11">Decembar</option>
                        </select>
                    </div>
                </div>

                <div class="section">
                    <div style="overflow-x: auto;">
                        <table class="expert-table" id="otpremac-mjesecni-table">
                            <thead id="otpremac-mjesecni-header"></thead>
                            <tbody id="otpremac-mjesecni-body"></tbody>
                            <tfoot id="otpremac-mjesecni-footer"></tfoot>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- DODANI UNOSI VIEW (For Rukovodilac/Admin) -->
        <div id="pending-unosi-content" class="container hidden">
            <div class="section">
                <h2>ğŸ“‹ Dodani Unosi - Pregled</h2>
                <p style="color: #6b7280; margin-bottom: 20px;">Unosi koje su radnici poslali na pregled</p>

                <!-- Filter Bar -->
                <div class="filter-bar">
                    <div class="filter-bar-title">ğŸ” Filteri</div>
                    <div class="filter-grid">
                        <div class="filter-group">
                            <label class="filter-label">Datum od:</label>
                            <input type="date" class="filter-input" id="filter-datum-od">
                        </div>
                        <div class="filter-group">
                            <label class="filter-label">Datum do:</label>
                            <input type="date" class="filter-input" id="filter-datum-do">
                        </div>
                        <div class="filter-group">
                            <label class="filter-label">Tip:</label>
                            <select class="filter-select" id="filter-tip">
                                <option value="">Sve</option>
                                <option value="SJEÄŒA">SjeÄa</option>
                                <option value="OTPREMA">Otprema</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label class="filter-label">Pretraga:</label>
                            <input type="text" class="filter-input" id="filter-search" placeholder="Odjel, radnik, kupac...">
                        </div>
                        <div class="filter-actions">
                            <button class="btn btn-primary" onclick="applyFilters()">Filtriraj</button>
                            <button class="btn btn-clear" onclick="clearFilters()">OÄisti</button>
                        </div>
                    </div>
                </div>

                <div id="pending-unosi-container"></div>
            </div>
        </div>

        <!-- STANJE ZALIHA VIEW -->
        <div id="stanje-zaliha-content" class="container hidden">
            <div class="section">
                <!-- Professional Header -->
                <div class="page-header">
                    <div class="page-header-left">
                        <h1>ğŸ“¦ Stanje Zaliha</h1>
                        <p>Pregled zaliha po odjelima - Projekat, SjeÄa, Otprema, Zaliha</p>
                    </div>
                    <div class="page-header-right">
                        <button class="btn btn-primary" onclick="exportStanjeZalihaToCSV()">ğŸ“¥ Export CSV</button>
                    </div>
                </div>

                <!-- Filter Bar -->
                <div class="controls-bar" style="margin-bottom: 24px;">
                    <div style="display: flex; gap: 16px; align-items: center; flex-wrap: wrap;">
                        <label style="font-weight: 600; color: #374151;">RadiliÅ¡te:</label>
                        <select id="stanje-zaliha-radiliste" class="filter-select" onchange="filterStanjeZaliha()" style="min-width: 200px; padding: 10px 16px; border: 2px solid #d1d5db; border-radius: 8px; font-size: 14px;">
                            <option value="">Sva radiliÅ¡ta</option>
                        </select>
                        <span id="stanje-zaliha-count" style="color: #6b7280; font-size: 14px;"></span>
                    </div>
                </div>

                <!-- Stanje Zaliha Container -->
                <div id="stanje-zaliha-container">
                    <!-- Cards will be rendered here -->
                </div>
            </div>
        </div>

        <!-- OSTALO VIEW -->
        <div id="ostalo-content" class="container hidden">
            <div class="section">
                <h2>âš™ï¸ Ostalo</h2>
                <p style="color: #6b7280; margin-bottom: 32px;">Dodatne funkcionalnosti i pregledi</p>

                <!-- Tab submenu za Ostalo -->
                <div class="tabs-submenu" style="margin-bottom: 24px;">
                    <button class="tab-sub active" onclick="switchOstaloTab('dinamika')">ğŸ“Š Dinamika</button>
                    <button class="tab-sub" onclick="switchOstaloTab('uporedba-godina')">ğŸ“ˆ Uporedba godina</button>
                    <button class="tab-sub" onclick="switchOstaloTab('kubikator')">ğŸ“ Kubikator</button>
                </div>

                <!-- Dinamika View - Obrisano: duplikat forme, koristi se zasebna stranica dinamika-content -->
                <div id="ostalo-dinamika-view" class="ostalo-view">
                    <div class="chart-card" style="padding: 32px; text-align: center;">
                        <h3 style="margin-bottom: 16px;">ğŸ“Š Dinamika</h3>
                        <p style="color: #6b7280; margin-bottom: 24px;">Za unos planiranih mjeseÄnih koliÄina koristite glavnu stranicu Dinamika</p>
                        <button class="btn btn-primary" onclick="switchTab('dinamika')" style="padding: 12px 24px; font-size: 16px;">
                            â¡ï¸ Idi na Dinamiku
                        </button>
                    </div>
                </div>

                <!-- Uporedba godina View -->
                <div id="ostalo-uporedba-view" class="ostalo-view hidden">
                    <h3>ğŸ“ˆ Uporedba godina - TekuÄ‡a vs ProÅ¡la</h3>
                    <p style="color: #6b7280;">Usporedba sjeÄe i otpreme po godinama</p>
                    <div id="uporedba-godina-container">
                        <div class="chart-card">
                            <h4>Odaberi godine za usporedbu:</h4>
                            <div style="display: flex; gap: 16px; margin-bottom: 24px;">
                                <select id="uporedba-year1" onchange="loadUporedbaGodina()" style="padding: 8px 16px; border: 2px solid #d1d5db; border-radius: 6px; font-size: 14px;">
                                    <option value="2026" selected>2026</option>
                                    <option value="2025">2025</option>
                                    <option value="2024">2024</option>
                                </select>
                                <span style="display: flex; align-items: center; font-weight: bold;">vs</span>
                                <select id="uporedba-year2" onchange="loadUporedbaGodina()" style="padding: 8px 16px; border: 2px solid #d1d5db; border-radius: 6px; font-size: 14px;">
                                    <option value="2026">2026</option>
                                    <option value="2025" selected>2025</option>
                                    <option value="2024">2024</option>
                                </select>
                            </div>
                            <canvas id="uporedba-chart" style="max-height: 400px;"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Kubikator View -->
                <div id="ostalo-kubikator-view" class="ostalo-view hidden">
                    <div class="chart-card" style="padding: 32px; text-align: center;">
                        <h3 style="margin-bottom: 16px;">ğŸ“ Kubikator</h3>
                        <p style="color: #6b7280; margin-bottom: 24px;">Kalkulator zapremine oblog drveta - Huber metoda</p>
                        <button class="btn btn-primary" onclick="switchTab('kubikator')" style="padding: 12px 24px; font-size: 16px;">
                            â¡ï¸ Idi na Kubikator
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirm Modal -->
    <div class="modal-overlay" id="confirm-modal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title" id="modal-title">Potvrda brisanja</div>
            </div>
            <div class="modal-body" id="modal-body">
                Da li ste sigurni da Å¾elite obrisati ovaj unos?
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeConfirmModal()">OtkaÅ¾i</button>
                <button class="btn btn-danger" id="modal-confirm-btn">ObriÅ¡i</button>
            </div>
        </div>
    </div>

</html>
